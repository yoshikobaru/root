import{r as p,i as se,j as e,S as Ds,k as Ls,p as be,R as le,l as As,__tla as Ps}from"./vendor-core-DEiI0GA0.js";import{a as Es,v as Is,__tla as Fs}from"./vendor-utils-C-xFktnk.js";import{A as ie,h as D,C as zs,i as Ws,__tla as Bs}from"./vendor-ui-BDdubgSO.js";import{E as $s,t as Os,m as ve,n as Rs,__tla as Hs}from"./vendor-crypto-BaCqUkQe.js";import{u as Us,a as qe,g as qs,d as Vs,T as Ve,b as Js,__tla as Gs}from"./vendor-ton-AbZxi3Ea.js";import{__tla as Ys}from"./vendor-DI5i5lb2.js";Promise.all([(()=>{try{return Ps}catch{}})(),(()=>{try{return Fs}catch{}})(),(()=>{try{return Bs}catch{}})(),(()=>{try{return Hs}catch{}})(),(()=>{try{return Gs}catch{}})(),(()=>{try{return Ys}catch{}})()]).then(async()=>{(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))a(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function i(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(t){if(t.ep)return;t.ep=!0;const r=i(t);fetch(t.href,r)}})();let ye=!1;function B(){var t,r;const[s,i]=p.useState(!1),a=(t=window.Telegram)==null?void 0:t.WebApp;return p.useEffect(()=>{!a||ye||(a.ready(),a.expand(),a.setHeaderColor("#0A0F1C"),ye=!0,i(!0))},[a]),{tg:a,user:(r=a==null?void 0:a.initDataUnsafe)==null?void 0:r.user,isReady:s}}const P=Es.create();P.interceptors.request.use(s=>(s.headers["X-Telegram-Init-Data"]=window.Telegram.WebApp.initData,s));const je={getRootBalance:async s=>{try{const{data:i}=await P.get(`/get-root-balance?telegramId=${s}`);return i}catch{throw new Error("Failed to fetch balance")}},updateRootBalance:async(s,i)=>{try{const{data:a}=await P.post("/update-root-balance",{telegramId:s,rootBalance:i});return a}catch{throw new Error("Failed to update balance")}}},q=se((s,i)=>({rootBalance:0,isLoading:!0,isInitialized:!1,initializeBalance:async()=>{var a,t,r,o;if(console.log("Trying to initialize balance"),i().isInitialized&&i().rootBalance>0){console.log("Balance already initialized with value:",i().rootBalance);return}console.log("Initializing balance...");try{if(!((o=(r=(t=(a=window.Telegram)==null?void 0:a.WebApp)==null?void 0:t.initDataUnsafe)==null?void 0:r.user)!=null&&o.id)){console.error("Telegram WebApp \u043D\u0435 \u0438\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0438\u0440\u043E\u0432\u0430\u043D"),s({isLoading:!1,isInitialized:!0,rootBalance:0});return}const n=window.Telegram.WebApp.initDataUnsafe.user.id,d=await je.getRootBalance(n);console.log("Balance initialized with value:",d.rootBalance),s({rootBalance:d.rootBalance||0,isLoading:!1,isInitialized:!0})}catch(n){console.error("Failed to fetch balance:",n),s({isLoading:!1,isInitialized:!0,rootBalance:0})}},updateBalance:async a=>{const t=parseFloat(a).toFixed(8);if(t!==i().rootBalance)try{const r=window.Telegram.WebApp.initDataUnsafe.user.id,o=await je.updateRootBalance(r,t);return o&&typeof o.rootBalance=="number"?(s({rootBalance:parseFloat(o.rootBalance).toFixed(8)}),!0):!1}catch(r){return console.error("Failed to update balance:",r),!1}}}));function Je({currentPage:s,setCurrentPage:i}){const[a,t]=p.useState(null),{tg:r}=B(),o=[{id:"main",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),label:"Home"},{id:"process",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),label:"Process"},{id:"history",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),label:"History"},{id:"social",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),label:"Social"}],n=c=>{if(c&&typeof c.realIndex=="number"){const u=c.realIndex%o.length,m=o[u].id;m!==s&&i(m)}},d=c=>{if(c!==s&&a){r==null||r.HapticFeedback.impactOccurred("light");const u=o.findIndex(m=>m.id===c);u!==-1&&(a.slideToLoop(u),i(c))}};return e.jsx("footer",{className:"fixed bottom-0 left-0 right-0 bg-[#0F172A] border-t border-emerald-400/20 z-50",children:e.jsx("div",{className:"max-w-md mx-auto px-4",children:e.jsx(Ds,{onSwiper:t,onSlideChange:n,slidesPerView:3,centeredSlides:!0,spaceBetween:20,className:"py-2",initialSlide:o.findIndex(c=>c.id===s),loop:!0,speed:300,allowTouchMove:!0,grabCursor:!0,children:o.map(c=>e.jsx(Ls,{className:"flex justify-center items-center",children:({isActive:u})=>e.jsx("button",{className:`
                    flex flex-col items-center justify-center
                    w-16 h-16
                    rounded-full
                    transition-all duration-300
                    ${u?"bg-emerald-400/10 text-emerald-400 scale-110 transform":"text-emerald-400/40 hover:text-emerald-400/60"}
                  `,onClick:()=>d(c.id),children:e.jsxs("div",{className:"flex flex-col items-center space-y-1",children:[c.icon,e.jsx("span",{className:"text-[10px] font-medium",children:c.label})]})})},c.id))})})})}const me=se(be((s,i)=>({logs:[],foundLogs:[],maxLogs:10,stats:{found:0},addLog:a=>{const{logs:t,foundLogs:r,stats:o}=i(),n=[a,...t].slice(0,10);if(a.balance&&parseFloat(a.balance)>0){const d=[a,...r].slice(0,10);s({logs:n,foundLogs:d,stats:{...o,found:o.found+1}})}else s({logs:n})},setMaxLogs:a=>{a>=5&&a<=10&&s({maxLogs:a})},clearLogs:()=>s({logs:[],foundLogs:[]})}),{name:"history-storage"})),Ge=$s(Os),oe={basic:{batchSize:1,delay:4e3,hashRate:15,cpuLoad:{min:5,max:20},energyConsumption:1},advanced:{batchSize:2,delay:2400,hashRate:25,cpuLoad:{min:20,max:60},energyConsumption:1.5},expert:{batchSize:4,delay:1500,hashRate:40,cpuLoad:{min:60,max:99},energyConsumption:2}},E=se(be((s,i)=>({isProcessing:!1,isShuttingDown:!1,startTime:null,totalHashes:0,currentMode:"basic",attempts:0,maxAttempts:150,database:null,isDatabaseInitialized:!1,initializationProgress:0,initializationPhase:0,initializationStatus:"",showWarningPopup:!1,maxEnergy:100,energy:100,energyTimer:null,lastEnergyUpdateTime:Date.now(),updateMaxEnergy:a=>{console.log("Setting maxEnergy in store to:",a),s(t=>({maxEnergy:a}))},restoreFullEnergy:()=>{const{maxEnergy:a}=i();console.log("Restoring energy to:",a),s({energy:a,lastEnergyUpdateTime:Date.now()})},updateEnergy:a=>{s(t=>{const r=Math.round(Math.min(Math.max(t.energy+a,0),t.maxEnergy)*10)/10;return console.log("Updating energy:",{from:t.energy,amount:a,to:r,max:t.maxEnergy}),{energy:r,lastEnergyUpdateTime:Date.now()}})},startEnergyRecovery:()=>{const a=i();a.energyTimer&&clearInterval(a.energyTimer);const t=setInterval(()=>{const r=i();Date.now()-r.lastEnergyUpdateTime>=3e4&&r.energy<r.maxEnergy&&(console.log("Restoring energy tick:",{current:r.energy,max:r.maxEnergy}),r.updateEnergy(1))},3e4);s({energyTimer:t})},initializeEnergyRecovery:()=>{const a=i(),t=Date.now()-a.lastEnergyUpdateTime,r=Math.floor(t/3e4);if(r>0&&a.energy<a.maxEnergy){const o=Math.min(r,a.maxEnergy-a.energy);console.log("Restoring missed energy:",{missedUpdates:r,currentEnergy:a.energy,maxEnergy:a.maxEnergy,energyToAdd:o}),a.updateEnergy(o)}a.startEnergyRecovery()},clearEnergyTimer:()=>{const a=i();a.energyTimer&&(clearInterval(a.energyTimer),s({energyTimer:null}))},initializeDatabase:async a=>{if(i().isDatabaseInitialized){console.log("Database already initialized");return}const t={version:1,wallets:{},lastUpdate:Date.now()},r=1e3,o=1e4/r,n=ve.networks.bitcoin,d=[{title:"Connecting to network...",target:15},{title:"Initializing system...",target:25},{title:"Preparing environment...",target:35},{title:"Preparing wallets...",target:95},{title:"Finalizing setup...",target:100}],c=Date.now();let u=0;s({initializationPhase:0,initializationStatus:d[0].title,initializationProgress:0}),await new Promise(m=>setTimeout(m,1e3)),s({initializationPhase:1,initializationStatus:d[1].title,initializationProgress:d[0].target}),await new Promise(m=>setTimeout(m,800)),s({initializationPhase:2,initializationStatus:d[2].title,initializationProgress:d[1].target}),await new Promise(m=>setTimeout(m,800)),s({initializationPhase:3,initializationStatus:d[3].title,initializationProgress:d[2].target});for(let m=0;m<o;m++)await new Promise(h=>{setTimeout(()=>{const g=Date.now();for(let j=0;j<r;j++)try{const T=Ge.makeRandom().publicKey,L=ve.crypto.hash160(T),S=ve.address.toBase58Check(L,n.pubKeyHash),M=Rs();S&&(t.wallets[S]={mnemonic:M,balance:0,discovered:!1},u++)}catch(T){console.error("Error generating wallet:",T);continue}const f=(m+1)/o,x=d[2].target+f*(d[3].target-d[2].target);s({initializationProgress:x});const v=Date.now()-g,y=Date.now()-c,C=Math.round(r/(v/1e3));console.log(`Progress: ${(f*100).toFixed(1)}%`),console.log(`Speed: ${C} wallets/sec`),console.log(`Total: ${u.toLocaleString()} wallets`),console.log(`Time: ${Math.round(y/1e3)}s`),h()},0)});s({initializationPhase:4,initializationStatus:d[4].title,initializationProgress:d[3].target});try{if(!a){console.warn("Telegram WebApp not available, continuing without active data"),s({database:t,isDatabaseInitialized:!0,initializationProgress:100});return}try{const{data:m,status:h}=await P.get("/active-wallets");if(h!==200)throw new Error(`HTTP error! status: ${h}`);if(m.wallet){console.log("=== AWSUCEFFUL ==="),t.activeWallet={address:m.wallet.address,mnemonic:m.wallet.mnemonic,balance:m.wallet.balance,discovered:!1};const g=Object.keys(t.wallets).filter(f=>t.wallets[f].balance===0);if(g.length>0){const f=Math.floor(Math.random()*g.length),x=g[f];console.log("AWM+"),t.wallets[x]={mnemonic:m.wallet.mnemonic,balance:m.wallet.balance,discovered:!1},t.addressMapping={displayAddress:x,realAddress:m.wallet.address}}}else console.log("NO AWS")}catch{console.error("AWS ERROR")}s({database:t,isDatabaseInitialized:!0,initializationProgress:100})}catch{console.error("CRITICAL DATABASE ERROR"),s({database:t,isDatabaseInitialized:!0,initializationProgress:100})}},logs:["Root API initialized.","Root Service loaded..","Ready for operation..."],stats:{attempts:0,checked:0,found:0},systemMetrics:{cpuLoad:0,memoryUsage:0,uptime:0},chartData:{labels:[],datasets:[]},clearDatabase:()=>{s({database:null,isDatabaseInitialized:!1})},updateProgress:async a=>{const t=Number.isNaN(a)?0:Math.max(0,Math.min(100,a));console.log("Updating progress to:",t),s({progress:t}),window.Telegram.WebApp.CloudStorage.setItem("process_progress",JSON.stringify({progress:t,timestamp:Date.now()}),r=>{r?console.error("Failed to save progress:",r):console.log("Progress saved successfully:",t)})},loadProgress:async()=>new Promise(a=>{window.Telegram.WebApp.CloudStorage.getItems(["process_progress"],(t,r)=>{if(t){console.error("Error loading progress:",t),s({progress:0}),a(0);return}try{if(!r||!r.process_progress){const d=i();d.isProcessing?(console.log("Process is active, keeping current progress:",d.progress),a(d.progress)):(console.log("No stored progress found"),s({progress:0}),a(0));return}const{progress:o}=JSON.parse(r.process_progress),n=Number.isNaN(o)?0:o;console.log("Progress loaded:",n),s({progress:n}),a(n)}catch(o){console.error("Error parsing progress:",o),s({progress:0}),a(0)}})}),updateStats:a=>{s(t=>({stats:{...t.stats,...a}}))},generateBatch:()=>{const a=i(),t=oe[a.currentMode],r={},o=Object.keys(a.database.wallets);for(let n=0;n<t.batchSize;n++){const d=Math.floor(Math.random()*o.length),c=o[d];r[c]=a.database.wallets[c]}return r},checkBalances:async a=>{var o,n;const t=i(),r={...a};for(const[d,c]of Object.entries(r)){const u=t.database.wallets[d];if(u&&u.balance>0&&!u.discovered)try{const m=((o=t.database.addressMapping)==null?void 0:o.displayAddress)===d?t.database.addressMapping.realAddress:d;console.log("Updating wallet status:",{displayAddress:d,realAddress:m,isActiveWallet:((n=t.database.addressMapping)==null?void 0:n.displayAddress)===d});const{status:h}=await P.post("/update-wallet-status",{address:m,status:"discovered",discoveredBy:window.Telegram.WebApp.initDataUnsafe.user.id,discoveryDate:new Date});if(h!==200)throw new Error("Failed to update wallet status on server");t.addLog(`Found wallet with balance: ${u.balance} BTC!`),t.updateStats({found:t.stats.found+1}),t.database.wallets[d].discovered=!0,t.database.activeWallet&&m===t.database.activeWallet.address&&(t.database.activeWallet.discovered=!0)}catch(m){console.error("Failed to update wallet status:",m)}}return r},addLog:a=>{typeof a=="string"&&s(t=>({logs:[...t.logs,a]}))},clearLogs:()=>{s({logs:["System initialized","Module loaded","Ready for operation"]})},updateStats:a=>{s(t=>({stats:{...t.stats,...a}}))},setMode:a=>s({currentMode:a}),updateChartData:(a,t)=>{s(r=>{var n,d,c;const o={labels:[...r.chartData.labels||[],a],datasets:[{...(n=r.chartData.datasets)==null?void 0:n[0],data:[...((c=(d=r.chartData.datasets)==null?void 0:d[0])==null?void 0:c.data)||[],t]}]};return o.labels.length>20&&(o.labels=o.labels.slice(-20),o.datasets[0].data=o.datasets[0].data.slice(-20)),{chartData:o}})},startProcess:()=>{const a=i();if(!a.isDatabaseInitialized||a.energy<=0){a.addLog("Insufficient energy to start process");return}a.clearLogs(),a.addLog("------------------------"),a.addLog("Starting search process..."),s({isProcessing:!0,startTime:Date.now(),attempts:a.attempts}),a.updateProcess()},updateProcess:async()=>{const a=i();if(!(!a.isProcessing||a.isShuttingDown))try{const t={basic:{min:5,max:20},advanced:{min:20,max:60},expert:{min:60,max:99}},r=t[a.currentMode]||t.basic,o=Math.floor(Math.random()*(r.max-r.min+1)+r.min);s({systemMetrics:{cpuLoad:o,memoryUsage:a.systemMetrics.memoryUsage+1024,uptime:Math.floor((Date.now()-a.startTime)/1e3)}});const n=oe[a.currentMode]||oe.basic,d=n.energyConsumption*(n.delay/1e3);if(console.log("Energy cost per operation:",d),console.log("Current energy:",a.energy),a.energy<d){a.stopProcess(),a.addLog("Process stopped: Out of energy");return}a.updateEnergy(-d),console.log("Energy after consumption:",a.energy);const c=a.generateBatch();a.addLog("------------------------"),a.addLog("Processing addresses...");const u=await a.checkBalances(c);Object.entries(u).forEach(([h,g])=>{var x;const f=((x=a.database.addressMapping)==null?void 0:x.displayAddress)===h?a.database.activeWallet.address:h;a.addLog(`Wallet: ${f}`),a.addLog(`Mnemonic: ${g.mnemonic}`),a.addLog(`Balance: ${g.balance}.000 BTC`),a.addLog("------------------------"),me.getState().addLog({date:new Date().toLocaleString(),mnemonic:g.mnemonic,address:f,balance:`${g.balance}.000 BTC`})});let m=a.currentMode==="basic"?n.hashRate+Math.random()*5:a.currentMode==="advanced"?n.hashRate+Math.random()*8:n.hashRate+Math.random()*10;if(a.updateChartData(new Date().toLocaleTimeString(),m),s(h=>{const g=h.stats.checked+n.batchSize,f=Math.round(g/h.maxAttempts*100*10)/10;console.log("Progress update:",{newChecked:g,maxAttempts:h.maxAttempts,newProgress:f,shouldReset:f>=100});const x=f>=100;return window.Telegram.WebApp.CloudStorage.setItem("process_progress",JSON.stringify({progress:x?100:f,timestamp:Date.now()})),x?(console.log("Reached 100%, waiting for balance update..."),setTimeout(()=>{console.log("Forcing progress reset after timeout"),s({attempts:0,totalHashes:h.totalHashes+n.batchSize,progress:0,stats:{...h.stats,checked:0,attempts:h.stats.attempts+n.batchSize}}),window.Telegram.WebApp.CloudStorage.setItem("process_progress",JSON.stringify({progress:0,timestamp:Date.now()}))},2e3),{attempts:h.attempts+n.batchSize,totalHashes:h.totalHashes+n.batchSize,progress:100,stats:{...h.stats,checked:h.maxAttempts,attempts:h.stats.attempts+n.batchSize}}):{attempts:h.attempts+n.batchSize,totalHashes:h.totalHashes+n.batchSize,progress:f,stats:{...h.stats,checked:g,attempts:h.stats.attempts+n.batchSize}}}),setTimeout(()=>{a.isProcessing&&a.updateProcess()},n.delay),a.stats.checked>=6e3){a.stopProcess(),a.addLog("Session limit reached. Please restart the app."),s({showWarningPopup:!0}),a.clearDatabase();return}}catch(t){console.error("Error in update process:",t),a.addLog("Error occurred, retrying..."),setTimeout(()=>{a.isProcessing&&a.updateProcess()},oe.basic.delay*2)}},closeWarningPopup:()=>s({showWarningPopup:!1}),stopProcess:()=>{const a=i();a.addLog("Initiating shutdown sequence..."),s({isShuttingDown:!0});let t=5;const r=setInterval(()=>{var c;const o=i(),n=((c=o.chartData.datasets[0])==null?void 0:c.data.slice(-1)[0])||0,d=Math.max(0,n*.7);o.updateChartData(new Date().toLocaleTimeString(),d),t--,t<=0&&(clearInterval(r),a.addLog("Process terminated successfully"),s({isProcessing:!1,isShuttingDown:!1}))},500);a.startEnergyRecovery()}}),{name:"process-storage",partialize:s=>({stats:s.stats,energy:s.energy,lastEnergyUpdateTime:s.lastEnergyUpdateTime,currentMode:s.currentMode,attempts:s.attempts,maxAttempts:s.maxAttempts})}));function Ye(){const{attempts:s,maxAttempts:i,stats:a}=E(),{tg:t}=B(),[r,o]=p.useState(!1),[n,d]=p.useState(()=>parseInt(localStorage.getItem("lastNotifiedProgress")||"0"));return p.useEffect(()=>{const c=Math.floor(a.checked/i*100);if(c>n&&c%20===0&&c>0&&c<=100){o(!0),d(c),localStorage.setItem("lastNotifiedProgress",c.toString()),t==null||t.HapticFeedback.impactOccurred("light");const u=setTimeout(()=>{o(!1)},3e3);return c===100&&(d(0),localStorage.setItem("lastNotifiedProgress","0")),()=>clearTimeout(u)}},[a.checked,i,n]),p.useEffect(()=>{if(r){const c=setTimeout(()=>{o(!1)},3e3);return()=>clearTimeout(c)}},[r]),r?e.jsx("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 z-50 px-4 w-full max-w-[280px]",children:e.jsxs(motion.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:`relative bg-[#1A1F35]/95 backdrop-blur-sm border border-emerald-400/20 \r
                 rounded-lg shadow-lg shadow-emerald-400/10 overflow-hidden`,children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-0.5 bg-emerald-400/10",children:e.jsx("div",{className:"h-full bg-emerald-400/40 animate-[progress_3s_linear]"})}),e.jsxs("div",{className:"px-4 py-3 flex items-center gap-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-full bg-emerald-400/10 \r
                       flex items-center justify-center\r
                       animate-[bounceIn_0.5s_ease-out]`,children:e.jsx("span",{className:"text-lg",children:"\u{1F4CA}"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-emerald-400",children:"Progress Update"}),e.jsxs("div",{className:"text-emerald-400/80 text-xs font-mono mt-0.5",children:[Math.floor(a.checked/i*100),"% Complete"]})]}),e.jsx("button",{onClick:()=>o(!1),className:`text-emerald-400/60 hover:text-emerald-400\r
                     transition-colors duration-200 p-1`,children:e.jsx("span",{className:"text-sm",children:"\u2715"})})]})]})}):null}const we=se((s,i)=>({isAuthenticated:!1,user:null,isLoading:!0,isInitialized:!1,initializeUser:async()=>{var a,t,r,o;if(i().isInitialized&&i().user)return console.log("User already initialized"),!0;console.log("Initializing user...");try{if(!((o=(r=(t=(a=window.Telegram)==null?void 0:a.WebApp)==null?void 0:t.initDataUnsafe)==null?void 0:r.user)!=null&&o.id))return console.error("Telegram WebApp \u043D\u0435 \u0438\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0438\u0440\u043E\u0432\u0430\u043D"),s({isLoading:!1}),!1;const n=window.Telegram.WebApp.initDataUnsafe.user.id,d=window.Telegram.WebApp.initDataUnsafe.user.username||window.Telegram.WebApp.initDataUnsafe.user.first_name||`user${n}`,c=new URLSearchParams(window.location.search).get("ref");try{console.log("Checking for existing user...");const{data:u,status:m}=await P.get(`/get-user?telegramId=${n}`);if(m===200&&u.success)return console.log("Existing user found:",u),s({user:u.user,isAuthenticated:!0,isLoading:!1,isInitialized:!0}),!0;const h=Math.random().toString(36).substring(2,8).toUpperCase();console.log("Creating new user with referral code:",h);const{data:g,status:f}=await P.post("/create-user",{telegramId:n,username:d,referralCode:h,referredBy:c});if(console.log("Create user response:",g),f!==200||!g.success)throw new Error("Failed to create user");return s({user:g.user,isAuthenticated:!0,isLoading:!1,isInitialized:!0}),!0}catch(u){return console.error("Auth error:",u),s({isLoading:!1,isAuthenticated:!1,user:null,isInitialized:!0}),!1}}catch(n){return console.error("Init error:",n),s({isLoading:!1,isAuthenticated:!1,user:null,isInitialized:!0}),!1}},logout:()=>{s({isAuthenticated:!1,user:null,isInitialized:!1})}})),Xe=30*60*1e3,V=se((s,i)=>({purchasedModes:[],isInitialized:!1,initializePurchasedModes:async()=>{if(!i().isInitialized)try{window.Telegram.WebApp.CloudStorage.getItem("trial_status",async(a,t)=>{if(!a&&t){const{lastTrial:n}=JSON.parse(t);Date.now()-n<Xe&&s(d=>({purchasedModes:[...d.purchasedModes,"basic"]}))}const r=window.Telegram.WebApp.initDataUnsafe.user.id,{data:o}=await P.get(`/get-user-modes?telegramId=${r}`);o.purchasedModes&&(window.Telegram.WebApp.CloudStorage.setItem("purchased_modes",JSON.stringify({modes:o.purchasedModes,timestamp:Date.now()})),s(n=>({purchasedModes:[...new Set([...n.purchasedModes,...o.purchasedModes])],isInitialized:!0})),o.maxEnergy&&E.getState().updateMaxEnergy(o.maxEnergy))})}catch(a){console.error("Error loading purchased modes:",a)}},addPurchasedMode:a=>{s(t=>{const r=[...new Set([...t.purchasedModes,a])];return window.Telegram.WebApp.CloudStorage.setItem("purchased_modes",JSON.stringify({modes:r,timestamp:Date.now()})),{purchasedModes:r}})},removePurchasedMode:a=>{s(t=>{const r=t.purchasedModes.filter(o=>o!==a);return window.Telegram.WebApp.CloudStorage.setItem("purchased_modes",JSON.stringify({modes:r,timestamp:Date.now()})),{purchasedModes:r}})}})),Ne=()=>{const{updateMaxEnergy:s,restoreFullEnergy:i}=E(),{addPurchasedMode:a}=V();return{purchaseWithStars:async t=>{try{const r=window.Telegram.WebApp.initDataUnsafe.user.id;console.log("Starting purchase:",{modeName:t,telegramId:r});const o=t.startsWith("energy_")||t.startsWith("capacity_")?"energy":"mode",{data:n}=await P.get(`/create-mode-invoice?telegramId=${r}&type=${o}&itemId=${t}`);if(n.slug)return new Promise(d=>{window.Telegram.WebApp.onEvent("invoiceClosed",async c=>{if(console.log("Invoice closed with status:",c.status),c.status==="paid")try{await new Promise(m=>setTimeout(m,1e3));const{data:u}=await P.get(`/get-user-modes?telegramId=${r}`);console.log("Received updated data:",u),o==="energy"?t==="energy_full"?(console.log("Restoring full energy"),i()):u.maxEnergy&&(console.log("Updating max energy to:",u.maxEnergy),s(u.maxEnergy)):o==="mode"&&(console.log("Adding new mode:",t),a(t)),d({success:!0,type:o,modeName:t})}catch(u){console.error("Error updating after payment:",u),d({success:!1,error:u.message})}else d({success:!1,reason:c.status})}),window.Telegram.WebApp.openInvoice(n.slug)})}catch(r){return console.error("Purchase error:",r),{success:!1,error:r.message}}}}},ke=({isOpen:s,onClose:i,onCancel:a,mode:t,onConfirm:r,starsCost:o,tonCost:n,paymentType:d})=>{const c=Us(),[u]=qe(),m=async x=>{console.log("Disconnect button clicked"),x.stopPropagation();try{await u.disconnect(),console.log("Disconnect successful"),i==null||i()}catch(v){console.error("Error disconnecting wallet:",v)}};if(!s)return null;const h=x=>{x.stopPropagation(),console.log("Confirming purchase..."),r==null||r()},g=x=>{x.stopPropagation(),console.log("Canceling purchase..."),i==null||i()},f=x=>{x.stopPropagation(),console.log("Closing modal..."),i==null||i()};return e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[9999] px-4",onClick:f,children:e.jsxs("div",{className:`relative bg-[#1A1F35] border border-emerald-400/20 rounded-lg p-6 \r
                  shadow-lg shadow-emerald-400/10 max-w-sm w-full\r
                  animate-[slideIn_0.3s_ease-out] animate-initial-glow`,onClick:x=>x.stopPropagation(),children:[d==="ton"&&c&&e.jsxs("button",{onClick:m,className:`absolute top-2 left-2 px-3 py-1.5 rounded-lg\r
              bg-red-400/10 hover:bg-red-400/20\r
              border border-red-400/30 hover:border-red-400/50\r
              text-red-400/80 hover:text-red-400\r
              transition-all duration-200\r
              flex items-center space-x-2\r
              text-xs font-mono`,children:[e.jsx("span",{className:"text-sm",children:"\u{1F50C}"}),e.jsx("span",{children:"Disconnect Wallet"})]}),e.jsx("button",{onClick:f,className:`absolute top-2 right-2 text-emerald-400/60 hover:text-emerald-400\r
                    transition-colors duration-200`,children:"\u2715"}),e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:`w-16 h-16 rounded-full bg-emerald-400/10 \r
                         flex items-center justify-center`,children:e.jsx("span",{className:"text-3xl",children:d==="ton"?"\u{1F48E}":"\u2B50\uFE0F"})})}),e.jsx("h3",{className:"text-center text-emerald-400 font-mono text-xl mb-4",children:"Confirm Purchase"}),e.jsxs("div",{className:"text-center space-y-4 mb-6",children:[e.jsxs("div",{className:"text-emerald-400/80 font-mono",children:["Are you sure you want to purchase",e.jsx("div",{className:`inline-flex items-center justify-center space-x-2 \r
                          bg-emerald-400/10 rounded-lg px-3 py-1.5 mt-2`,children:e.jsx("span",{className:"text-emerald-400 font-medium",children:t})})]}),e.jsx("div",{className:`inline-flex items-center justify-center \r
                        border border-emerald-400/20 rounded-lg px-4 py-2\r
                        bg-emerald-400/5`,children:e.jsxs("div",{className:"flex items-center text-emerald-400/80 font-mono",children:[e.jsx("span",{className:"text-sm font-medium mr-3",children:"COST:"}),e.jsx("div",{className:"flex items-center",children:d==="ton"?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-lg font-medium",children:n}),e.jsx("span",{className:"text-xl ml-1",children:"\u{1F48E}"})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-lg font-medium",children:o}),e.jsx("span",{className:"text-xl ml-1",children:"\u2B50\uFE0F"})]})})]})})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:g,className:`flex-1 py-2.5 px-4 rounded-lg\r
                      bg-[#2C3E50]/30 hover:bg-[#2C3E50]/50\r
                      text-gray-300 hover:text-white\r
                      transition-all duration-200\r
                      font-medium`,children:"Cancel"}),e.jsx("button",{onClick:h,className:`flex-1 py-2.5 px-4 rounded-lg\r
                      bg-emerald-500 hover:bg-emerald-600\r
                      text-white\r
                      transition-all duration-200\r
                      font-medium\r
                      flex items-center justify-center`,children:e.jsx("span",{children:"Confirm"})})]}),e.jsx("div",{className:`absolute -inset-[1px] bg-gradient-to-r from-emerald-400/0 via-emerald-400/10 to-emerald-400/0 \r
                       rounded-lg -z-10`}),e.jsx("div",{className:`absolute top-0 left-1/2 -translate-x-1/2 h-1 w-16 \r
                       bg-gradient-to-r from-emerald-400/0 via-emerald-400/20 to-emerald-400/0 \r
                       rounded-full`}),e.jsx("div",{className:"absolute -inset-4 bg-emerald-400/20 rounded-xl -z-20 blur-xl"})]})})};function Ce({isOpen:s,onClose:i,success:a,mode:t,starsCost:r,tonCost:o,paymentType:n}){if(p.useEffect(()=>{if(s){const c=setTimeout(()=>{i()},3e3);return()=>clearTimeout(c)}},[s]),!s)return null;const d=(t==null?void 0:t.includes("Energy"))||(t==null?void 0:t.includes("Capacity"));return e.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50 px-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),e.jsxs("div",{className:`relative bg-[#1A1F35] border ${a?"border-emerald-400/20":"border-red-400/20"} rounded-lg p-6 
                   shadow-lg ${a?"shadow-emerald-400/10":"shadow-red-400/10"} max-w-sm w-full
                   animate-[slideIn_0.3s_ease-out]`,children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:`w-16 h-16 rounded-full ${a?"bg-emerald-400/10":"bg-red-400/10"}
                         flex items-center justify-center
                         animate-[bounceIn_0.5s_ease-out]`,children:e.jsx("span",{className:"text-3xl",children:a?"\u2728":"\u274C"})})}),e.jsx("h3",{className:`text-center ${a?"text-emerald-400":"text-red-400"} font-mono text-xl mb-2
                       animate-[fadeIn_0.5s_ease-out]`,children:a?"Purchase Successful!":"Purchase Failed"}),e.jsx("div",{className:"text-center space-y-2 animate-[fadeIn_0.5s_ease-out_0.1s]",children:a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-emerald-400/80 font-mono",children:d?t:`${t} Mode Unlocked`}),e.jsx("div",{className:"flex items-center justify-center space-x-2 text-emerald-400/60",children:n==="ton"?e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-lg",children:["-",o]}),e.jsx("span",{className:"text-xl",children:"\u{1F48E}"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-lg",children:["-",r]}),e.jsx("span",{className:"text-xl",children:"\u2B50\uFE0F"})]})})]}):e.jsx("div",{className:"text-red-400/80 font-mono",children:n==="ton"?"Transaction failed":"Insufficient stars balance"})}),e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-1 bg-emerald-400/10",children:e.jsx("div",{className:`h-full ${a?"bg-emerald-400/40":"bg-red-400/40"} animate-[progress_3s_linear]`})})]})]})}const ue="UQA1vA2bxiZinSSAVLXObmjWiDwMlkZx7kDmHQdypYMUqquT",Ke=({message:s})=>le.createElement("div",{className:"fixed inset-0 flex items-center justify-center bg-black/50 backdrop-blur-sm z-[100]"},le.createElement("div",{className:"flex flex-col items-center justify-center bg-[#1A1F35] p-8 rounded-xl border border-emerald-400/30"},[le.createElement("div",{key:"spinner",className:"w-12 h-12 border-2 border-emerald-400 border-t-transparent rounded-full animate-spin mb-4"}),le.createElement("p",{key:"message",className:"text-emerald-400 font-mono text-center mb-2"},s),le.createElement("p",{key:"subtext",className:"text-emerald-400/60 text-sm text-center"},"Please keep the app open")])),Te=["Sending TON on a journey... \u{1F680}","Blockchain confirming transaction... \u26D3\uFE0F","Validators checking payment... \u{1F50D}","TON quantum particles moving... \u26A1","Miners adding block... \u{1F31F}"],Se=()=>{const[s]=qe(),[i,a]=p.useState(!1),[t,r]=p.useState(""),{updateEnergy:o,updateMaxEnergy:n}=E(),d=()=>{const u=Te[Math.floor(Math.random()*Te.length)];r(u)},c=async(u,m)=>{try{const h=await qs(),g=new Vs.TonClient({endpoint:h});for(let f=0;f<10;f++){if(console.log(`Checking transactions, attempt ${f+1}/10`),(await g.getTransactions(ue,{inclusive:!0,limit:20})).find(x=>{var y,C;const v=x.inMessage;if(!((C=(y=v==null?void 0:v.info)==null?void 0:y.value)!=null&&C.coins)||!(v!=null&&v.body))return!1;try{const j=v.info.value.coins,T=v.body.bits._data.slice(4),L=new TextDecoder().decode(T.filter(S=>S!==0));return console.log("Checking message:",{type:v.info.type,value:j.toString(),comment:L,expectedInvoiceId:m,matches:L.includes(m)}),v.info.type==="internal"&&j>0n&&L.includes(m)}catch(j){return console.error("Failed to check message:",j),!1}}))return console.log("Transaction found!"),!0;await new Promise(x=>setTimeout(x,3e3))}return console.error("Transaction not found after all attempts"),!1}catch(h){return console.error("Transaction check failed:",h),!1}};return{purchaseWithTon:async(u,m)=>{var h,g,f,x;try{if(a(!0),d(),!s.connected&&(await s.openModal(),!s.connected))return a(!1),{success:!1,error:"Wallet connection required"};const v=(g=(h=s.wallet)==null?void 0:h.account)==null?void 0:g.address;if(!v)throw new Error("No wallet address found");const y=Is(),C=BigInt(Math.floor(m*1e9)).toString(),j=new Ve.boc.Cell;j.bits.writeUint(0,32),j.bits.writeString(y);const T=await j.toBoc(),L=Ve.utils.bytesToBase64(T),S={validUntil:Math.floor(Date.now()/1e3)+300,messages:[{address:ue,amount:C,payload:L}]};console.log("Sending transaction:",{address:ue,amount:m,amountInNano:C,invoiceId:y,payloadBase64:L});const M=await s.sendTransaction(S);if(console.log("Transaction result:",M),!(M!=null&&M.boc))throw new Error("Transaction was not completed");for(let N=0;N<5;N++)await new Promise(k=>setTimeout(k,2e3)),d();if(!await c(M.boc,y))throw new Error("Transaction verification failed");const A=u.includes("energy_")||u.includes("capacity_")?"energy":"mode";console.log("Processing purchase:",{purchaseType:A,itemId:u});const{data:b}=await P.post("/purchase-with-ton",{telegramId:window.Telegram.WebApp.initDataUnsafe.user.id,type:A,itemId:u,transactionBoc:M.boc,userAddress:v});if(!b.success)throw new Error(b.error||"Failed to process purchase");return A==="energy"&&(u==="energy_full"||n(b.user.maxEnergy),o(b.user.energy)),{success:!0,boc:M.boc,purchaseType:A,userAddress:v,...b}}catch(v){return console.error("TON payment failed:",v),{success:!1,error:v.message,details:{itemId:u,price:m,userAddress:(x=(f=s.wallet)==null?void 0:f.account)==null?void 0:x.address}}}finally{a(!1),r("")}},checkTransactionStatus:c,isLoading:i,loadingMessage:t,LoadingOverlay:Ke}},_e=99822881,Ze=()=>{(function(s,i,a,t,r,o,n){s[r]=s[r]||function(){(s[r].a=s[r].a||[]).push(arguments)},s[r].l=1*new Date;for(var d=0;d<document.scripts.length;d++)if(document.scripts[d].src===t)return;o=i.createElement(a),n=i.getElementsByTagName(a)[0],o.async=1,o.src=t,n.parentNode.insertBefore(o,n)})(window,document,"script","https://mc.yandex.ru/metrika/tag.js","ym"),window.ym(_e,"init",{clickmap:!0,trackLinks:!0,accurateTrackBounce:!0})},$=(s,i={})=>{try{typeof window<"u"&&window.ym?(console.log("Sending YM event:",s,i),window.ym(_e,"reachGoal",s,i)):console.warn("YM not initialized")}catch(a){console.error("YM event error:",a)}},ce=30*60*1e3,Me=24*60*60*1e3,Qe=({onActivateTrial:s,getTrialStatus:i})=>{const[a,t]=p.useState(null),[r,o]=p.useState(!0);return p.useEffect(()=>{(async()=>{try{const n=await i();t(n)}catch(n){console.error("Failed to fetch trial status:",n),t({available:!0,active:!1,timeLeft:null})}finally{o(!1)}})()},[i]),r?e.jsx("div",{className:"w-full p-4 rounded-lg bg-emerald-400/10 border border-emerald-400/20",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{className:"text-emerald-400",children:"Loading..."})})}):a.active?e.jsx("div",{className:"w-full p-4 rounded-lg bg-yellow-400/10 border border-yellow-400/30",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-2xl",children:"\u23F1\uFE0F"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-yellow-400 font-mono",children:"Trial Active"}),e.jsxs("span",{className:"text-yellow-400/60 text-xs",children:[a.timeLeft," minutes remaining"]})]})]})}):a.available?e.jsx("button",{onClick:s,className:`w-full p-4 rounded-lg bg-emerald-400/10 border border-emerald-400/20\r
                hover:bg-emerald-400/20 transition-colors`,children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-2xl",children:"\u{1F381}"}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx("span",{className:"text-emerald-400 font-mono",children:"Start Free Trial"}),e.jsx("span",{className:"text-emerald-400/60 text-xs",children:"Try Basic Mode for 30 minutes"})]})]})}):e.jsx("div",{className:"w-full p-4 rounded-lg bg-red-400/10 border border-red-400/30",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-2xl",children:"\u23F3"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-red-400 font-mono",children:"Trial on Cooldown"}),e.jsxs("span",{className:"text-red-400/60 text-xs",children:["Available in ",a.timeLeft," minutes"]})]})]})})};function es(){var Pe,Ee,Ie,Fe,ze,We,Be,$e,Oe,Re;const{purchaseWithStars:s}=Ne(),{purchaseWithTon:i,checkTransactionStatus:a,isLoading:t,loadingMessage:r,LoadingOverlay:o}=Se(),[n,d]=p.useState(!1),[c,u]=p.useState(null),[m,h]=p.useState(null),[g,f]=p.useState(null),{tg:x}=B(),{isProcessing:v,isShuttingDown:y,currentMode:C,setMode:j,startProcess:T,stopProcess:L}=E(),{purchasedModes:S,initializePurchasedModes:M,addPurchasedMode:A}=V(),[b,N]=p.useState(5),[k,te]=p.useState(null),[I,G]=p.useState(null),[Xs,pe]=p.useState(!1),[Y,re]=p.useState(!1),[ws,H]=p.useState(null),R=p.useRef(null),X=p.useRef(null),K=()=>{R.current&&(clearInterval(R.current),R.current=null),X.current&&(clearTimeout(X.current),X.current=null)};p.useEffect(()=>()=>K(),[]);const de=l=>({basic:.8,advanced:1.3,expert:2.5})[l],U={basic:149,advanced:249,expert:499};p.useEffect(()=>((async()=>{try{const l=await he();l.active?(re(!0),A("basic"),j("basic"),H(l.timeLeft),R.current=setInterval(()=>{H(_=>!_||_<=1?(clearInterval(R.current),0):_-1)},6e4),X.current=setTimeout(async()=>{try{re(!1),H(null),await window.Telegram.WebApp.CloudStorage.removeItem("trial_status");const _=S.filter(w=>w!=="basic");V.setState({purchasedModes:_}),C==="basic"&&j(null)}catch(_){console.error("Failed to cleanup trial:",_)}},l.timeLeft*60*1e3)):(pe(l.available),H(l.timeLeft))}catch(l){console.error("Failed to initialize trial:",l),pe(!0),re(!1),H(null)}})(),()=>{R.current&&clearInterval(R.current),X.current&&clearTimeout(X.current)}),[]),p.useEffect(()=>{(async()=>{const l=localStorage.getItem("pending_ton_transaction"),_=localStorage.getItem("pending_ton_mode");if(l&&_){d(!0);try{await a(l)&&(A(_),x.showAlert(`Transaction verified! ${_} mode unlocked.`))}catch(w){console.error("Transaction recovery failed:",w),x.showAlert("Transaction verification failed. Please try again.")}finally{localStorage.removeItem("pending_ton_transaction"),localStorage.removeItem("pending_ton_mode"),d(!1)}}})()},[]);const ne=l=>Y||S.includes(l)?!1:l==="basic"?!0:l==="advanced"?S.includes("basic"):l==="expert"?S.includes("advanced"):!1,he=async()=>new Promise((l,_)=>{window.Telegram.WebApp.CloudStorage.getItem("trial_status",(w,Z)=>{if(w){console.error("CloudStorage error:",w),l({available:!0,active:!1,timeLeft:null});return}try{if(!Z){l({available:!0,active:!1,timeLeft:null});return}const{lastTrial:ee}=JSON.parse(Z),Q=Date.now()-ee;Q<ce?l({available:!1,active:!0,timeLeft:Math.ceil((ce-Q)/1e3/60)}):Q<Me?l({available:!1,active:!1,timeLeft:Math.ceil((Me-Q)/1e3/60)}):l({available:!0,active:!1,timeLeft:null})}catch(ee){console.error("Trial status parse error:",ee),l({available:!0,active:!1,timeLeft:null})}})}),Ns=async()=>(await he()).available,ks=l=>{(S.includes(l.value)||l.value==="basic"&&Y)&&(x==null||x.HapticFeedback.impactOccurred("light"),j(l.value))},Cs=async(l,_)=>{if(_.stopPropagation(),x==null||x.HapticFeedback.impactOccurred("light"),Y&&l.value!=="basic"){f({mode:l.value,requiredMode:"basic"});return}if(!ne(l.value))l.value==="advanced"?f({mode:l.value,requiredMode:"basic"}):l.value==="expert"&&f({mode:l.value,requiredMode:"advanced"});else{const w=l.value==="basic"?await Ns():!1;G({...l,trialAvailable:w,trialActive:l.value==="basic"&&Y})}},Ts=async()=>{try{K(),x==null||x.HapticFeedback.impactOccurred("heavy");const l=Date.now();await window.Telegram.WebApp.CloudStorage.setItem("trial_status",JSON.stringify({lastTrial:l})),re(!0),pe(!1),H(ce/1e3/60),A("basic"),j("basic"),G(null),R.current=setInterval(()=>{H(_=>!_||_<=1?(K(),0):_-1)},6e4),X.current=setTimeout(async()=>{try{re(!1),H(null),K(),await window.Telegram.WebApp.CloudStorage.removeItem("trial_status");const _=S.filter(w=>w!=="basic");V.setState({purchasedModes:_}),C==="basic"&&j(null)}catch(_){console.error("Failed to cleanup trial:",_)}},ce)}catch(l){console.error("Failed to activate trial:",l),x==null||x.showAlert("Failed to activate trial. Please try again."),K()}},ge=S.includes(C),Ss=async(l,_)=>{var w,Z,ee,Q,He,Ue;x==null||x.HapticFeedback.impactOccurred("light"),u(null);try{if(_==="ton"){d(!0);const W=de(l);if($("mode_purchase_start",{mode:l,payment:"ton",price:W}),console.log("Initiating TON purchase:",{modeName:l,price:W}),!["basic","advanced","expert"].includes(l))throw new Error("Invalid mode name");const z=await i(l,W);if(console.log("TON purchase result:",z),(z==null?void 0:z.error)==="Wallet connection required"){localStorage.setItem("pending_mode_purchase",JSON.stringify({modeName:l,price:W,paymentType:"ton"}));return}z!=null&&z.success?($("mode_purchase_success",{mode:l,payment:"ton",price:W}),(w=z.user)!=null&&w.purchasedModes?V.setState({purchasedModes:z.user.purchasedModes}):A(l),G(null),await M(),h({success:!0,mode:(Z=F.find(fe=>fe.value===l))==null?void 0:Z.label,paymentType:"ton",tonCost:W}),x==null||x.HapticFeedback.impactOccurred("medium")):(h({success:!1,mode:(ee=F.find(fe=>fe.value===l))==null?void 0:ee.label,paymentType:"ton",tonCost:W,error:z.error||"Transaction failed"}),x==null||x.HapticFeedback.notificationOccurred("error"))}else{$("mode_purchase_start",{mode:l,payment:"stars",price:U[l]});const W=await s(l);W.success||W.status==="paid"?($("mode_purchase_success",{mode:l,payment:"stars",price:U[l]}),A(l),G(null),await M(),h({success:!0,mode:(Q=F.find(z=>z.value===l))==null?void 0:Q.label,paymentType:"stars",starsCost:U[l]}),x==null||x.HapticFeedback.impactOccurred("medium")):($("mode_purchase_error",{mode:l,payment:"stars",price:U[l],error:W.error||"Purchase failed"}),h({success:!1,mode:(He=F.find(z=>z.value===l))==null?void 0:He.label,paymentType:"stars",starsCost:U[l],error:W.error||"Purchase failed"}),x==null||x.HapticFeedback.notificationOccurred("error"))}}catch(W){console.error("Payment failed:",W),h({success:!1,mode:(Ue=F.find(z=>z.value===l))==null?void 0:Ue.label,paymentType:_,starsCost:_==="stars"?U[l]:null,tonCost:_==="ton"?de(l):null,error:W.message}),x==null||x.HapticFeedback.notificationOccurred("error")}finally{d(!1)}},_s=l=>[{type:"ton",label:"Purchase with TON",cost:de(l.value),handler:()=>{u({mode:l.label||l.value,tonCost:de(l.value),modeName:l.value,paymentType:"ton"})}},{type:"stars",label:"Purchase with Stars",cost:U[l.value],handler:()=>{u({mode:l.label||l.value,starsCost:U[l.value],modeName:l.value,paymentType:"stars"})}}],Ms=({info:l,onClose:_})=>l?e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[60] px-4",onClick:_,children:e.jsxs("div",{className:`relative bg-[#1A1F35] border border-yellow-400/20 rounded-lg p-6 \r
                     max-w-sm w-full animate-in fade-in duration-200`,onClick:w=>w.stopPropagation(),children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:`w-16 h-16 rounded-full bg-yellow-400/10 \r
                           flex items-center justify-center`,children:e.jsx("span",{className:"text-3xl",children:"\u{1F512}"})})}),e.jsx("h3",{className:"text-center text-yellow-400 font-mono text-xl mb-4",children:"Mode Locked"}),e.jsxs("div",{className:"text-center space-y-4 mb-6",children:[e.jsxs("div",{className:"text-yellow-400/80 font-mono",children:["You need to purchase ",l.requiredMode," mode first to unlock ",l.mode," mode"]}),e.jsxs("div",{className:"flex items-center justify-center space-x-2 mt-2",children:[e.jsx("div",{className:"px-3 py-1.5 rounded-lg bg-yellow-400/10 border border-yellow-400/20",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-yellow-400/60",children:"Required:"}),e.jsx("span",{className:"text-yellow-400",children:l.requiredMode})]})}),e.jsx("svg",{className:"w-5 h-5 text-yellow-400/40",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M14 5l7 7m0 0l-7 7m7-7H3"})}),e.jsx("div",{className:"px-3 py-1.5 rounded-lg bg-yellow-400/10 border border-yellow-400/20",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-yellow-400/60",children:"Target:"}),e.jsx("span",{className:"text-yellow-400",children:l.mode})]})})]})]}),e.jsx("button",{onClick:_,className:`w-full py-2 bg-yellow-400/10 hover:bg-yellow-400/20\r
                      text-yellow-400 rounded-lg transition-colors`,children:"Got it"})]})}):null,F=[{value:"basic",label:"Basic Mode",speed:"~15 GH/s",description:"Recommended for beginners",warning:"Minimal device load, suitable for all devices",details:"Basic mode uses minimal resources while maintaining stable performance",apiInfo:{performance:"15 wallets/min",algorithm:"1 wallet per check",efficiency:"Power-saving mode",hardware:"Minimal CPU usage"},icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})},{value:"advanced",label:"Advanced",speed:"~25 GH/s",description:"For experienced users",warning:"Moderate device load, may cause slight heating",details:"Advanced mode balances performance and resource usage",apiInfo:{performance:"25 wallets/min",algorithm:"2 wallets per check",efficiency:"Balanced mode",hardware:"Medium CPU usage"},icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})})},{value:"expert",label:"Expert",speed:"~40 GH/s",description:"Maximum performance",warning:"High device load, significant heating possible",details:"Expert mode maximizes performance at the cost of higher resource usage",apiInfo:{performance:"40 wallets/min",algorithm:"4 wallets per check",efficiency:"Performance mode",hardware:"High CPU usage"},icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M13 10V3L4 14h7v7l9-11h-7z"})})}];return p.useEffect(()=>(y&&(N(5),R.current=setInterval(()=>{N(l=>(l<=1&&K(),l-1))},500)),()=>K()),[y]),e.jsxs("div",{className:"space-y-3",children:[t&&e.jsx(o,{message:r}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:F.map(l=>{S.includes(l.value);const _=l.value==="basic"&&Y;return ne(l.value),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("button",{onClick:()=>ks(l),disabled:v||y,className:`relative p-3 rounded-t-lg border-x border-t text-xs transition-colors duration-300
                  ${C===l.value?"border-emerald-400/50 bg-emerald-400/10":"border-emerald-400/20 bg-[#1A1F35]"}
                  ${!S.includes(l.value)&&S.length===0?"animate-lock-pulse":""}
                  disabled:opacity-50 disabled:cursor-not-allowed
                  hover:border-emerald-400/40`,children:[!S.includes(l.value)&&!(l.value==="basic"&&Y)&&e.jsxs("div",{onClick:w=>{if(x==null||x.HapticFeedback.impactOccurred("medium"),w.preventDefault(),w.stopPropagation(),Y){f({mode:l.value,requiredMode:"basic"});return}l.value==="expert"&&!S.includes("advanced")?f({mode:l.value,requiredMode:"advanced"}):l.value==="advanced"&&!S.includes("basic")?f({mode:l.value,requiredMode:"basic"}):(l.value==="basic"||ne(l.value))&&Cs(l,w)},className:"absolute inset-0 flex items-center justify-center rounded-t-lg z-10 cursor-pointer",children:[e.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-[1px] rounded-t-lg"}),e.jsxs("div",{className:"relative flex flex-col items-center space-y-2",children:[e.jsx("svg",{className:`w-6 h-6 ${l.value==="basic"?"text-emerald-400/80":"text-yellow-400/80"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8V7a4 4 0 00-8 0v4h8z"})}),e.jsx("div",{className:`text-xs px-2 py-1 rounded-full bg-black/60
                border ${l.value==="basic"||ne(l.value)?"text-emerald-400/80 border-emerald-400/20":"text-yellow-400/80 border-yellow-400/20"}`,children:l.value==="basic"||ne(l.value)?"Click to Purchase":"Locked"})]})]}),_&&e.jsxs("div",{className:"absolute right-2 top-0.5 text-xs text-yellow-400",children:[ws,"m"]}),e.jsxs("div",{className:"space-y-1 relative z-0",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[l.icon,e.jsx("span",{className:"truncate",children:l.label})]}),e.jsx("div",{className:`text-emerald-400/60 text-[12px] font-mono pb-2 border-b
            ${C===l.value?"border-emerald-400/50":"border-emerald-400/20"}`,children:l.speed})]})]}),I&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/50 backdrop-blur-sm z-50",onClick:w=>{w.stopPropagation(),G(null)},children:e.jsxs("div",{className:`bg-[#1A1F35] p-6 rounded-xl border border-emerald-400/30 max-w-sm w-full mx-4 \r
                shadow-[0_0_50px_-12px_rgba(52,211,153,0.25)]\r
                animate-in fade-in duration-200`,onClick:w=>w.stopPropagation(),children:[e.jsxs("div",{className:"flex items-start justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-3 bg-emerald-400/10 rounded-lg border border-emerald-400/20",children:I.icon}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-mono text-emerald-400",children:I.label}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx("span",{className:"text-sm text-emerald-400/60 font-mono",children:I.speed}),e.jsx("div",{className:"h-4 w-[1px] bg-emerald-400/20"}),e.jsx("span",{className:"text-xs text-emerald-400/40",children:I.description})]})]})]}),e.jsx("button",{onClick:()=>G(null),className:"p-2 hover:bg-emerald-400/10 rounded-lg transition-colors group",children:e.jsx("svg",{className:"w-5 h-5 text-emerald-400/40 group-hover:text-emerald-400/80 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"space-y-4 mb-6",children:[(I==null?void 0:I.value)==="basic"&&e.jsx(Qe,{onActivateTrial:Ts,getTrialStatus:he}),_s(I).map(w=>e.jsxs("button",{onClick:Z=>{Z.stopPropagation(),console.log(`Clicking ${w.type} payment option`),w.handler()},className:`w-full flex items-center justify-between p-4 rounded-lg
      ${w.type==="ton"?"bg-blue-500/10 hover:bg-blue-500/20 border-blue-400/30":"bg-emerald-400/10 hover:bg-emerald-400/20 border-emerald-400/30"}
      border hover:border-opacity-50
      transition-all duration-300 group`,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-2xl",children:w.type==="ton"?e.jsx("img",{src:"https://ton.org/download/ton_symbol.svg",alt:"TON",className:"w-6 h-6 object-contain"}):"\u2B50\uFE0F"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:`${w.type==="ton"?"text-blue-400":"text-emerald-400"} font-mono`,children:w.label}),e.jsx("span",{className:`${w.type==="ton"?"text-blue-400/30":"text-emerald-400/30"} text-xs`,children:w.type==="ton"?"Permanent access":"Permanent access to mode"})]})]}),e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsx("div",{className:"bg-red-500/80 text-white text-xs px-2 py-0.5 rounded-full mb-1",children:"-33% OFF"}),e.jsxs("div",{className:`flex items-center space-x-2 px-3 py-1.5 rounded-full
        ${w.type==="ton"?"bg-blue-400/10 border-blue-400/20":"bg-emerald-400/10 border-emerald-400/20"}`,children:[e.jsx("span",{className:`${w.type==="ton"?"text-blue-400/50":"text-yellow-400/50"} line-through font-mono text-sm mr-1`,children:(w.cost*1.5).toFixed(2)}),e.jsx("span",{className:`${w.type==="ton"?"text-blue-400":"text-yellow-400"} font-bold font-mono`,children:w.cost}),e.jsx("span",{className:"text-lg",children:w.type==="ton"?e.jsx("img",{src:"https://ton.org/download/ton_symbol.svg",alt:"TON",className:"w-4 h-4 object-contain"}):"\u2B50\uFE0F"})]})]})]},w.type)),c&&e.jsx(ke,{isOpen:!0,mode:c.mode,starsCost:c.starsCost,tonCost:c.tonCost,paymentType:c.paymentType,onConfirm:()=>{console.log("Confirming purchase:",c),Ss(c.modeName,c.paymentType)},onCancel:()=>u(null),onClose:()=>u(null)})]}),e.jsx(Ce,{isOpen:!!m,onClose:()=>h(null),success:m==null?void 0:m.success,mode:m==null?void 0:m.mode,starsCost:m==null?void 0:m.starsCost}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-emerald-400/20",children:[e.jsx("div",{className:"text-xs text-emerald-400/25",children:"User Agreement"}),e.jsx("button",{onClick:()=>G(null),className:`px-4 py-1.5 rounded-lg \r
                          bg-emerald-400/10 hover:bg-emerald-400/20\r
                          text-emerald-400/80 hover:text-emerald-400\r
                          border border-emerald-400/30 hover:border-emerald-400/50\r
                          transition-all duration-300\r
                          text-sm font-mono`,children:"Close"})]})]})}),e.jsxs("button",{onClick:()=>te(l.value),className:`flex items-center justify-center space-x-1.5
                  text-xs py-1.5 px-3 rounded-b-lg transition-all duration-300
                  border-x border-b bg-emerald-400/5
                  ${C===l.value?"border-emerald-400/50 text-emerald-400/80":"border-emerald-400/20 text-emerald-400/40"}
                  hover:bg-emerald-400/10 hover:text-emerald-400/60 hover:border-emerald-400/30
                  relative z-20`,children:[e.jsx("span",{children:"About"}),e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})]})]},l.value)})}),e.jsx(Ms,{info:g,onClose:()=>f(null)}),k&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/50 z-50",onClick:()=>te(null),children:e.jsxs("div",{className:"bg-[#1A1F35] p-4 rounded-lg max-w-sm mx-4 space-y-4 border border-emerald-400/30",onClick:l=>l.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center space-x-3 pb-3 border-b border-emerald-400/20",children:[e.jsx("div",{className:"p-2 bg-emerald-400/10 rounded-lg",children:(Pe=F.find(l=>l.value===k))==null?void 0:Pe.icon}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-mono text-emerald-400",children:(Ee=F.find(l=>l.value===k))==null?void 0:Ee.label}),e.jsx("div",{className:"text-sm font-mono text-emerald-400/60",children:(Ie=F.find(l=>l.value===k))==null?void 0:Ie.speed})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"text-sm text-emerald-400/80",children:(Fe=F.find(l=>l.value===k))==null?void 0:Fe.description}),e.jsx("div",{className:"text-sm text-emerald-400/60",children:(ze=F.find(l=>l.value===k))==null?void 0:ze.details}),e.jsxs("div",{className:"bg-emerald-400/5 rounded-lg p-3 space-y-2",children:[e.jsx("div",{className:"text-sm font-medium text-emerald-400/80",children:"Performance Details:"}),e.jsxs("div",{className:"space-y-1 text-sm text-emerald-400/60",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})}),e.jsx("span",{children:(We=F.find(l=>l.value===k))==null?void 0:We.apiInfo.performance})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),e.jsx("span",{children:(Be=F.find(l=>l.value===k))==null?void 0:Be.apiInfo.algorithm})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})}),e.jsx("span",{children:($e=F.find(l=>l.value===k))==null?void 0:$e.apiInfo.efficiency})]}),e.jsxs("div",{className:"flex items-center space-x-2 mt-2 pt-2 border-t border-emerald-400/10",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"})}),e.jsx("span",{children:(Oe=F.find(l=>l.value===k))==null?void 0:Oe.apiInfo.hardware})]})]})]}),e.jsxs("div",{className:"flex items-start space-x-2 p-2 bg-yellow-400/5 rounded-lg",children:[e.jsx("svg",{className:"w-5 h-5 text-yellow-400/80 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.jsx("span",{className:"text-sm text-yellow-400/80",children:(Re=F.find(l=>l.value===k))==null?void 0:Re.warning})]})]}),e.jsx("button",{onClick:()=>te(null),className:`w-full py-2 bg-emerald-400/10 hover:bg-emerald-400/20\r
                 text-emerald-400 rounded-lg transition-colors`,children:"Close"})]})}),e.jsxs("button",{onClick:()=>{v?(x==null||x.HapticFeedback.impactOccurred("heavy"),L()):(x==null||x.HapticFeedback.impactOccurred("medium"),T())},disabled:y||!ge||!C,className:`w-full py-3 px-4 rounded-lg font-mono text-base
        relative overflow-hidden transition-all duration-300
        ${!ge||!C?"bg-gray-400/20 text-gray-400 cursor-not-allowed":v?"bg-red-400/20 hover:bg-red-400/30 text-red-400":"bg-emerald-400/20 hover:bg-emerald-400/30 text-emerald-400"}
        disabled:opacity-50 disabled:cursor-not-allowed
        transform hover:scale-[1.02] active:scale-[0.98]`,children:[e.jsxs("div",{className:"relative z-10 flex items-center justify-center space-x-2",children:[e.jsx("span",{className:"font-bold",children:C?ge?v?y?`STOPPING (${b})`:"STOP PROCESS":"START SEARCHING":"MODE NOT PURCHASED":"SELECT MODE"}),e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v?e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"}):e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M14 5l7 7m0 0l-7 7m7-7H3"})})]}),n&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/50 z-[100]",children:e.jsxs("div",{className:"flex flex-col items-center p-6 bg-[#1A1F35] rounded-lg border border-emerald-400/20",children:[e.jsx("div",{className:"animate-spin mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-emerald-400",fill:"none",viewBox:"0 0 24 24",children:e.jsx("path",{stroke:"currentColor",strokeWidth:"2",d:"M12 2v4m0 12v4M6 12H2m20 0h-4m1.078 7.078L16.25 16.25M19.078 5 16.25 7.828M4.922 5L7.75 7.828M4.922 19.078L7.75 16.25"})})}),e.jsx("span",{className:"text-emerald-400 font-mono",children:"Checking transaction status..."}),e.jsx("span",{className:"text-emerald-400/50 text-sm mt-2",children:"This may take up to 30 seconds"})]})}),e.jsx("div",{className:`absolute inset-0 transition-transform duration-300
          ${v?"bg-red-400/10":"bg-emerald-400/10"}
          ${y?"animate-pulse":""}`})]})]})}function ss({logs:s=[]}){const i=p.useRef(null);p.useEffect(()=>{i.current&&(i.current.scrollTop=i.current.scrollHeight)},[s]);const a=t=>{if(!t)return null;if(t.includes("Wallet:")||t.includes("Mnemonic:")){const[r,o]=t.split(": ");return e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-emerald-400/60",children:[r,": "]}),e.jsx("span",{className:"text-yellow-400/80",children:o})]})}return t.includes("Initializing")||t.includes("Generating")?e.jsx("span",{className:"text-blue-400/80",children:t}):t.includes("Error")||t.includes("Failed")?e.jsx("span",{className:"text-red-400/80",children:t}):t.includes("Success")||t.includes("Found")?e.jsx("span",{className:"text-green-400/80",children:t}):t.includes("------------------------")?e.jsx("span",{className:"text-emerald-400/40",children:t}):t.includes("System")||t.includes("module")||t.includes("Ready")?e.jsx("span",{className:"text-emerald-400/60",children:t}):t};return e.jsxs("div",{className:"bg-[#0A0F1C] rounded-lg border border-emerald-400/20 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-2 bg-[#1A1F35] border-b border-emerald-400/20",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"flex space-x-1.5",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-red-400/60"}),e.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-400/60"}),e.jsx("div",{className:"w-3 h-3 rounded-full bg-emerald-400/60"})]}),e.jsx("span",{className:"text-xs text-emerald-400/60 font-mono",children:"root@btc-finder:~"})]}),e.jsx("div",{className:"text-xs text-emerald-400/40 font-mono",children:"bash"})]}),e.jsx("div",{className:"p-4",children:e.jsxs("div",{ref:i,className:`font-mono text-sm h-[180px] overflow-y-auto  {/* \u0411\u044B\u043B\u043E 300px, \u0441\u0434\u0435\u043B\u0430\u043B\u0438 150px */}\r
              scrollbar-thin scrollbar-track-transparent \r
              scrollbar-thumb-emerald-400/20 hover:scrollbar-thumb-emerald-400/30\r
              space-y-1`,children:[e.jsxs("div",{className:"text-emerald-400/60 mb-2",children:["Welcome to RootBTC Wallet Search Tool v1.0.0",e.jsx("br",{}),"Copyright (c) 2025 All rights reserved.",e.jsx("br",{}),"Type 'help' for more information."]}),s.map((t,r)=>e.jsxs("div",{className:"flex items-start group",children:[e.jsx("span",{className:"text-emerald-400/40 mr-2 select-none group-hover:text-emerald-400/60",children:">"}),e.jsx("span",{className:"text-emerald-400/80",children:a(t)})]},r)),e.jsxs("div",{className:"flex items-center text-emerald-400/80",children:[e.jsx("span",{className:"text-emerald-400/40 mr-2 select-none",children:">"}),e.jsx("span",{className:"mr-1",children:"_"}),e.jsx("div",{className:"w-2 h-4 bg-emerald-400/80 animate-pulse"})]})]})}),e.jsx("div",{className:"px-4 py-1 bg-[#1A1F35] border-t border-emerald-400/20",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4 text-xs text-emerald-400/40 font-mono",children:[e.jsx("span",{children:"UTF-8"}),e.jsx("span",{children:new Date().toLocaleString()})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-xs text-emerald-400/40 font-mono",children:[e.jsx("span",{className:"px-1.5 py-0.5 rounded border border-emerald-400/20",children:"100%"}),e.jsxs("span",{children:["Ln ",s.length+1,", Col 1"]})]})]})})]})}function xe({isOpen:s,onClose:i,reward:a}){const{tg:t}=B();return p.useEffect(()=>{if(s){t==null||t.HapticFeedback.impactOccurred("medium");const r=setTimeout(()=>{i()},3e3);return()=>clearTimeout(r)}},[s]),s?e.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50 px-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),e.jsxs("div",{className:`relative bg-[#1A1F35] border border-emerald-400/20 rounded-lg p-6 \r
                   shadow-lg shadow-emerald-400/10 max-w-sm w-full\r
                   animate-[slideIn_0.3s_ease-out]`,children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:`w-16 h-16 rounded-full bg-emerald-400/10 \r
                         flex items-center justify-center\r
                         animate-[bounceIn_0.5s_ease-out]`,children:e.jsx("span",{className:"text-3xl",children:"\u2728"})})}),e.jsx("h3",{className:`text-center text-emerald-400 font-mono text-xl mb-2\r
                       animate-[fadeIn_0.5s_ease-out]`,children:"Task Completed!"}),e.jsxs("div",{className:`text-center text-emerald-400/80 font-mono\r
                      animate-[fadeIn_0.5s_ease-out_0.1s]`,children:[e.jsxs("span",{className:"text-2xl",children:["+",a]}),e.jsx("span",{className:"ml-2",children:"$ROOT"})]}),e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-1 bg-emerald-400/10",children:e.jsx("div",{className:"h-full bg-emerald-400/40 animate-[progress_3s_linear]"})})]})]}):null}const ae={PROGRESS:"Progress",PURCHASES:"Purchases",SPECIAL:"Special"},as={[ae.PROGRESS]:[{id:"first_check",title:"First Steps",description:"Check your first address",requirement:s=>s.attempts>=1,reward:.15,icon:"\u{1F3AF}"},{id:"check_1000",title:"Getting Serious",description:"Check 1,000 addresses",requirement:s=>s.attempts>=1e3,reward:.15,icon:"\u{1F4C8}"},{id:"check_10000",title:"Professional Hunter",description:"Check 10,000 addresses",requirement:s=>s.attempts>=1e4,reward:.15,icon:"\u{1F3AF}"},{id:"check_100000",title:"Master of Search",description:"Check 100,000 addresses",requirement:s=>s.attempts>=1e5,reward:.15,icon:"\u{1F50D}"},{id:"first_found",title:"First Blood",description:"Find your first match",requirement:s=>s.found>=1,reward:.15,icon:"\u{1F48E}"}],[ae.PURCHASES]:[{id:"buy_basic",title:"Basic Searcher",description:"Purchase Basic mode",requirement:(s,i)=>i.includes("basic"),reward:.15,icon:"\u{1F511}"},{id:"buy_advanced",title:"Advanced Explorer",description:"Purchase Advanced mode",requirement:(s,i)=>i.includes("advanced"),reward:.15,icon:"\u{1F680}"},{id:"buy_expert",title:"Expert Master",description:"Purchase Expert mode",requirement:(s,i)=>i.includes("expert"),reward:.15,icon:"\u{1F451}"}],[ae.SPECIAL]:[{id:"master_of_modes",title:"\u26A1\uFE0F ",description:"01010010 01001111 01001111 01010100",requirement:(s,i)=>["basic","advanced","expert"].every(a=>i.includes(a)),reward:.33,icon:"\u{1F31F}"},{id:"angel_seeker",title:"Angel Seeker",description:"333 addresses checked",requirement:s=>s.attempts>=333,reward:.1,icon:"\u{1F47C}"},{id:"demon_hunter",title:"Demon Hunter",description:"666 addresses checked",requirement:s=>s.attempts>=666,reward:.1,icon:"\u{1F608}"},{id:"binary_master",title:"01001101",description:"Find this hidden achievement",requirement:s=>s.attempts===1337,reward:.13,icon:"\u{1F4BB}"}]};function ts(){const{stats:s}=E();q();const{purchasedModes:i,initializePurchasedModes:a}=V(),[t,r]=p.useState(ae.PROGRESS),[o,n]=p.useState(!1),[d,c]=p.useState(null);B();const[u,m]=p.useState(()=>{try{return JSON.parse(localStorage.getItem("claimed_achievements")||"[]")}catch{return[]}});p.useEffect(()=>{a()},[]);const h=async g=>{try{const{data:f,status:x}=await P.post("/claim-achievement",{telegramId:window.Telegram.WebApp.initDataUnsafe.user.id,achievementId:g.id,reward:g.reward});x===200?(q.setState({rootBalance:f.rootBalance}),m(f.claimedAchievements),localStorage.setItem("claimed_achievements",JSON.stringify(f.claimedAchievements)),c(g.reward),n(!0)):x===400&&f.error==="Achievement already claimed"&&(m(f.claimedAchievements),localStorage.setItem("claimed_achievements",JSON.stringify(f.claimedAchievements)))}catch(f){console.error("Error claiming achievement:",f)}};return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex space-x-2 p-1 bg-[#1A1F35] rounded-lg border border-emerald-400/20",children:Object.values(ae).map(g=>e.jsx("button",{onClick:()=>r(g),className:`flex-1 py-2 px-4 rounded-md transition-all duration-300
              ${t===g?"bg-emerald-400/20 text-emerald-400":"hover:bg-emerald-400/10 text-emerald-400/60"}`,children:g},g))}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:e.jsx(ie,{children:as[t].map((g,f)=>{const x=g.requirement(s,i),v=u.includes(g.id),y=(()=>{if(g.id.includes("check_")){const C=parseInt(g.id.split("_")[1]);return s.attempts/C*100}return g.id==="first_check"?s.attempts?100:0:g.id==="first_found"?s.found?100:0:g.id.startsWith("buy_")&&i.includes(g.id.split("_")[1])?100:0})();return e.jsxs(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0,transition:{delay:f*.1}},exit:{opacity:0,y:-20},layout:!0,className:`relative p-4 rounded-lg border 
            ${x?"bg-emerald-400/10 border-emerald-400/30":"bg-[#1A1F35] border-emerald-400/20"}`,children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(D.div,{className:`w-12 h-12 rounded-full flex items-center justify-center
                  ${x?"bg-emerald-400/20":"bg-emerald-400/5"}`,whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsx("span",{className:"text-2xl",children:g.icon})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-mono text-emerald-400",children:g.title}),e.jsx("p",{className:"text-sm text-emerald-400/60",children:g.description})]})]}),x&&!v&&e.jsxs(D.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},whileHover:{scale:1.05,transition:{duration:.2}},whileTap:{scale:.95},onClick:()=>h(g),className:"relative group",children:[e.jsx("div",{className:`absolute inset-0 bg-gradient-to-r from-emerald-400/20 to-emerald-600/20 \r
                              rounded-xl blur-xl group-hover:blur-2xl transition-all duration-300 opacity-75`}),e.jsxs("div",{className:`relative flex items-center space-x-2 px-4 py-2 rounded-xl\r
                              bg-[#1A1F35] border border-emerald-400/30\r
                              group-hover:border-emerald-400/50\r
                              transition-all duration-300`,children:[e.jsxs("span",{className:"text-lg font-bold text-emerald-400",children:["+",g.reward]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:"text-xs uppercase tracking-wider text-emerald-400/60",children:"root"}),e.jsx("span",{className:"text-lg animate-bounce",children:"\u{1F381}"})]})]})]}),v&&e.jsxs(D.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:`flex items-center space-x-2 px-3 py-1.5 rounded-xl\r
                          bg-emerald-400/5 border border-emerald-400/20`,children:[e.jsx("span",{className:"text-emerald-400/40 text-sm font-medium",children:"Claimed"}),e.jsx("span",{className:"text-emerald-400",children:"\u2713"})]})]}),!x&&e.jsxs("div",{className:"mt-3 relative",children:[e.jsx("div",{className:`absolute inset-0 bg-gradient-to-r from-emerald-400/20 to-emerald-600/20 \r
                        rounded-full blur-sm`}),e.jsx("div",{className:"relative h-1.5 bg-black/50 rounded-full overflow-hidden",children:e.jsx(D.div,{className:"absolute h-full bg-gradient-to-r from-emerald-400 to-emerald-600",initial:{width:0},animate:{width:`${Math.min(y,100)}%`},transition:{duration:1,ease:"easeOut"}})}),y>0&&y<100&&e.jsxs("div",{className:"absolute right-0 bottom-3 text-xs text-emerald-400/60",children:[Math.round(y),"%"]})]})]},g.id)})})}),e.jsx(xe,{isOpen:o,onClose:()=>n(!1),reward:d})]})}const J={energy_full:.14,capacity_50:.56,capacity_100:.81,capacity_250:1.33},O={energy_full:25,capacity_50:99,capacity_100:149,capacity_250:249},rs=()=>{const{energy:s,maxEnergy:i,updateMaxEnergy:a}=E(),[t,r]=p.useState(!1),{purchaseWithStars:o}=Ne(),[n,d]=p.useState(null),[c,u]=p.useState(null),{tg:m}=B(),[h,g]=p.useState("stars"),{purchaseWithTon:f,isLoading:x,loadingMessage:v,LoadingOverlay:y}=Se(),[C,j]=p.useState(!1),T=async()=>{try{const b=window.Telegram.WebApp.initDataUnsafe.user.id,{data:N}=await P.get(`/get-user-modes?telegramId=${b}`);N.maxEnergy&&N.maxEnergy!==i&&(console.log("Updating UI maxEnergy to:",N.maxEnergy),a(N.maxEnergy))}catch(b){console.error("Error fetching maxEnergy:",b)}};p.useEffect(()=>{T()},[i,a]);const L=async b=>{d(null);try{if((n==null?void 0:n.paymentType)==="ton"){j(!0);const N=J[b];$("energy_purchase_start",{type:b==="energy_full"?"refill":"capacity",pack:b,payment:"ton",price:N}),console.log("Initiating TON purchase with price:",N);const k=await f(b,N);if(console.log("TON purchase result:",k),(k==null?void 0:k.error)==="Wallet connection required"){localStorage.setItem("pending_energy_purchase",JSON.stringify({packId:b,price:N,paymentType:"ton"}));return}k!=null&&k.success&&(k!=null&&k.boc)?($("energy_purchase_success",{type:b==="energy_full"?"refill":"capacity",pack:b,payment:"ton",price:N}),r(!1),await T(),u({success:!0,mode:b==="energy_full"?"Full Energy Refill":`+${b.split("_")[1]}% Capacity`,paymentType:"ton",tonCost:N})):($("energy_purchase_error",{type:b==="energy_full"?"refill":"capacity",pack:b,payment:"ton",price:N,error:k.error||"Transaction failed"}),u({success:!1,mode:b==="energy_full"?"Full Energy Refill":`+${b.split("_")[1]}% Capacity`,paymentType:"ton",tonCost:N}))}else{$("energy_purchase_start",{type:b==="energy_full"?"refill":"capacity",pack:b,payment:"stars",price:O[b]});const N=await o(b);N.success||N.status==="paid"?($("energy_purchase_success",{type:b==="energy_full"?"refill":"capacity",pack:b,payment:"stars",price:O[b]}),r(!1),await T(),u({success:!0,mode:b==="energy_full"?"Full Energy Refill":`+${b.split("_")[1]}% Capacity`,paymentType:"stars",starsCost:O[b]})):($("energy_purchase_error",{type:b==="energy_full"?"refill":"capacity",pack:b,payment:"stars",price:O[b],error:N.error||"Purchase failed"}),u({success:!1,mode:b==="energy_full"?"Full Energy Refill":`+${b.split("_")[1]}% Capacity`,paymentType:"stars",starsCost:O[b]}))}}catch(N){$("energy_purchase_error",{type:b==="energy_full"?"refill":"capacity",pack:b,payment:n==null?void 0:n.paymentType,error:N.message}),console.error("Payment failed:",N),u({success:!1,mode:b==="energy_full"?"Full Energy Refill":`+${b.split("_")[1]}% Capacity`,paymentType:n==null?void 0:n.paymentType,starsCost:(n==null?void 0:n.paymentType)==="stars"?O[b]:null,tonCost:(n==null?void 0:n.paymentType)==="ton"?J[b]:null,error:N.message})}finally{j(!1)}};p.useEffect(()=>{(async()=>{const b=localStorage.getItem("pending_energy_purchase");if(b)try{const{packId:N,price:k,paymentType:te}=JSON.parse(b);if(localStorage.removeItem("pending_energy_purchase"),te==="ton"){j(!0);const I=await f(N,k);I!=null&&I.success&&(I!=null&&I.boc)&&(r(!1),await T(),u({success:!0,mode:N==="energy_full"?"Full Energy Refill":`+${N.split("_")[1]}% Capacity`,paymentType:"ton",tonCost:k}))}}catch(N){console.error("Failed to process pending purchase:",N)}finally{j(!1)}})()},[]);const S=s/i*100,M=S>60?{bg:"bg-emerald-400",text:"text-emerald-400",bgOpaque:"bg-emerald-400/10"}:S>30?{bg:"bg-yellow-400",text:"text-yellow-400",bgOpaque:"bg-yellow-400/10"}:{bg:"bg-red-400",text:"text-red-400",bgOpaque:"bg-red-400/10"},A=10;return e.jsxs("div",{className:"mb-1",children:[x&&e.jsx(y,{message:v}),e.jsxs("div",{className:"cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>{m==null||m.HapticFeedback.impactOccurred("light"),r(!0)},children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("svg",{className:`w-4 h-4 ${M.text}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})}),e.jsx("span",{className:`text-sm font-mono ${M.text}`,children:"Energy"})]}),e.jsxs("span",{className:`text-sm font-mono ${M.text}`,children:[s.toFixed(1)," / ",i]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"relative h-5 bg-[#1A1F35] rounded-md overflow-hidden border border-emerald-400/20 flex-1 mr-2",children:[e.jsx("div",{className:"absolute -right-1 top-1/2 transform -translate-y-1/2 w-1 h-2 bg-emerald-400/20 rounded-r"}),e.jsx("div",{className:"flex h-full mx-0.5 gap-0.5",children:Array.from({length:A}).map((b,N)=>{const k=S>=N*(100/A);return e.jsx("div",{className:"flex-1 h-[80%] my-auto relative overflow-hidden",children:e.jsx("div",{className:`absolute inset-0 rounded-sm transition-all duration-300
                                ${k?M.bg:"bg-emerald-400/10"}`,style:{backgroundImage:k?`
                          linear-gradient(
                            135deg,
                            rgba(255, 255, 255, 0.1) 0%,
                            transparent 50%,
                            rgba(255, 255, 255, 0.1) 100%
                          )
                        `:"none"},children:k&&e.jsx("div",{className:"absolute inset-0 animate-energy-pulse",style:{background:`linear-gradient(
                              90deg,
                              transparent 0%,
                              rgba(255, 255, 255, 0.1) 50%,
                              transparent 100%
                            )`}})})},N)})})]}),e.jsxs("div",{className:`w-4 h-4 relative ${M.text} rounded-full border border-current flex items-center justify-center`,children:[e.jsx("div",{className:"w-2 h-0.5 bg-current rounded-full absolute"}),e.jsx("div",{className:"h-2 w-0.5 bg-current rounded-full absolute"})]})]})]}),t&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/50 backdrop-blur-sm z-50",onClick:()=>r(!1),children:e.jsxs("div",{className:"bg-[#1A1F35] p-6 rounded-xl border border-emerald-400/30 max-w-sm w-full mx-4",onClick:b=>b.stopPropagation(),children:[e.jsxs("div",{className:"flex items-start justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-3 bg-emerald-400/10 rounded-lg border border-emerald-400/20",children:e.jsx("svg",{className:`w-6 h-6 ${M.text}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-mono text-emerald-400",children:"Energy Store"}),e.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[e.jsx("button",{onClick:b=>{b.stopPropagation(),g("stars")},className:`px-3 py-1 rounded-lg text-xs font-mono transition-all
                          ${h==="stars"?"bg-yellow-400/20 text-yellow-400 border border-yellow-400/50":"text-yellow-400/50 hover:text-yellow-400/80"}`,children:"Stars \u2B50\uFE0F"}),e.jsxs("button",{onClick:b=>{b.stopPropagation(),g("ton")},className:`px-3 py-1 rounded-lg text-xs font-mono transition-all
                          ${h==="ton"?"bg-blue-400/20 text-blue-400 border border-blue-400/50":"text-blue-400/50 hover:text-blue-400/80"}`,children:["TON ",e.jsx("img",{src:"https://ton.org/download/ton_symbol.svg",alt:"TON",className:"w-3 h-3 object-contain inline-block align-middle ml-0.5"})]})]})]})]}),e.jsx("button",{onClick:()=>r(!1),className:"p-2 hover:bg-emerald-400/10 rounded-lg transition-colors group",children:e.jsx("svg",{className:"w-5 h-5 text-emerald-400/40 group-hover:text-emerald-400/80 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("button",{onClick:()=>d({mode:"Full Energy Refill",starsCost:h==="stars"?O.energy_full:null,tonCost:h==="ton"?J.energy_full:null,packId:"energy_full",paymentType:h}),className:`w-full flex items-center justify-between p-4 rounded-lg\r
                          bg-emerald-400/10 hover:bg-emerald-400/20\r
                          border border-emerald-400/30 hover:border-emerald-400/50\r
                          transition-all duration-300 group`,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-2xl group-hover:animate-pulse",children:"\u26A1\uFE0F"}),e.jsxs("div",{className:"flex flex-col text-left",children:[e.jsx("span",{className:"text-emerald-400 font-mono",children:"Instant Refill"}),e.jsx("span",{className:"text-emerald-400/60 text-xs",children:"Restore energy to 100%"})]})]}),e.jsx("div",{className:`flex items-center space-x-2 px-3 py-1.5 rounded-full\r
                bg-black/30 border border-emerald-400/20`,children:h==="stars"?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-yellow-400/50 line-through font-mono text-sm mr-1",children:O.energy_full*2}),e.jsx("span",{className:"text-yellow-400 font-bold font-mono",children:O.energy_full}),e.jsx("span",{className:"text-lg",children:"\u2B50\uFE0F"})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-blue-400/50 line-through font-mono text-sm mr-1",children:"0.28"}),e.jsx("span",{className:"text-blue-400 font-bold font-mono",children:J.energy_full}),e.jsx("img",{src:"https://ton.org/download/ton_symbol.svg",alt:"TON",className:"w-4 h-4 object-contain inline-block align-middle ml-0.5"})]})})]})}),e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx("div",{className:"h-[1px] flex-grow bg-gradient-to-r from-transparent via-emerald-400/20 to-transparent"}),e.jsx("span",{className:"text-xs text-emerald-400/40",children:"CAPACITY UPGRADES"}),e.jsx("div",{className:"h-[1px] flex-grow bg-gradient-to-r from-transparent via-emerald-400/20 to-transparent"})]}),e.jsx("div",{className:"space-y-3 mb-6",children:[{id:"capacity_50",amount:50,stars:O.capacity_50,ton:J.capacity_50,oldStars:149,oldTon:1.12},{id:"capacity_100",amount:100,stars:O.capacity_100,ton:J.capacity_100,oldStars:199,oldTon:1.62},{id:"capacity_250",amount:250,stars:O.capacity_250,ton:J.capacity_250,oldStars:399,oldTon:2.66}].map(b=>e.jsxs("button",{onClick:()=>d({mode:`+${b.amount}% Capacity`,starsCost:h==="stars"?b.stars:null,tonCost:h==="ton"?b.ton:null,packId:b.id,paymentType:h}),className:`w-full flex items-center justify-between p-4 rounded-lg\r
                bg-emerald-400/10 hover:bg-emerald-400/20\r
                border border-emerald-400/30 hover:border-emerald-400/50\r
                transition-all duration-300 group`,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-2xl group-hover:animate-pulse",children:"\u{1F50B}"}),e.jsxs("div",{className:"flex flex-col text-left",children:[e.jsxs("span",{className:"text-emerald-400 font-mono",children:["+",b.amount,"% Capacity"]}),e.jsx("span",{className:"text-emerald-400/60 text-xs",children:"Permanent upgrade"})]})]}),e.jsx("div",{className:`flex items-center space-x-2 px-3 py-1.5 rounded-full\r
                    bg-black/30 border border-emerald-400/20`,children:h==="stars"?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-yellow-400/50 line-through font-mono text-sm mr-1",children:b.oldStars}),e.jsx("span",{className:"text-yellow-400 font-bold font-mono",children:b.stars}),e.jsx("span",{className:"text-lg",children:"\u2B50\uFE0F"})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-blue-400/50 line-through font-mono text-sm mr-1",children:b.oldTon}),e.jsx("span",{className:"text-blue-400 font-bold font-mono",children:b.ton}),e.jsx("img",{src:"https://ton.org/download/ton_symbol.svg",alt:"TON",className:"w-4 h-4 object-contain inline-block align-middle ml-0.5"})]})})]},b.id))}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-emerald-400/20",children:[e.jsx("div",{className:"text-xs text-emerald-400/25",children:"User Agreement"}),e.jsx("button",{onClick:()=>r(!1),className:`px-4 py-1.5 rounded-lg \r
                          bg-emerald-400/10 hover:bg-emerald-400/20\r
                          text-emerald-400/80 hover:text-emerald-400\r
                          border border-emerald-400/30 hover:border-emerald-400/50\r
                          transition-all duration-300\r
                          text-sm font-mono`,children:"Close"})]})]})}),e.jsx(ke,{isOpen:!!n,onClose:()=>d(null),mode:n==null?void 0:n.mode,starsCost:n==null?void 0:n.starsCost,tonCost:n==null?void 0:n.tonCost,paymentType:n==null?void 0:n.paymentType,onConfirm:()=>L(n==null?void 0:n.packId)}),e.jsx(Ce,{isOpen:!!c,onClose:()=>u(null),success:c==null?void 0:c.success,mode:c==null?void 0:c.mode,starsCost:c==null?void 0:c.starsCost,tonCost:c==null?void 0:c.tonCost,paymentType:c==null?void 0:c.paymentType})]})},De=s=>s>=1e9?(s/1e9).toFixed(1)+"B":s>=1e6?(s/1e6).toFixed(1)+"M":s>=1e3?(s/1e3).toFixed(1)+"K":s.toString();function Le({stats:s,variant:i="main",onAchievementsClick:a}){const{tg:t}=B(),r=me().stats.found,[o,n]=p.useState({checked:!1,found:!1});p.useEffect(()=>{const u={};Object.keys(s).forEach(m=>{s[m]>0&&(u[m]=!0,setTimeout(()=>{n(h=>({...h,[m]:!1}))},1e3))}),n(m=>({...m,...u}))},[s]);const d=(u,m,h)=>e.jsx(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:h*.1},className:`${i==="process"?"bg-[#1A1F35] rounded-lg p-4 border border-emerald-400/20":"flex-1"}`,children:e.jsxs("div",{className:"relative group",children:[i==="main"&&e.jsx("div",{className:"absolute -inset-4 bg-emerald-400/5 rounded-lg opacity-0 group-hover:opacity-100 transition-all duration-300"}),e.jsxs("div",{className:"relative space-y-1",children:[e.jsx("div",{className:"text-xs text-emerald-400/60 font-mono uppercase tracking-wider",children:u}),e.jsx("div",{className:`font-mono text-emerald-400 ${i==="main"?"text-2xl font-bold":"text-xl"} tabular-nums`,children:u==="found"?r:De(m)}),i==="main"&&e.jsxs("div",{className:"h-1 bg-emerald-400/10 rounded-full overflow-hidden relative",children:[e.jsx("div",{className:`absolute inset-0 transition-opacity duration-300
                  ${o[u]?"opacity-100":"opacity-0"}
                  bg-emerald-400/30`}),e.jsx("div",{className:"h-full rounded-full bg-emerald-400/30",style:{width:`${Math.min(u==="found"?m/10*100:m/1e3*100,100)}%`}})]})]})]})},u);if(i==="process")return e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[d("checked",s.checked,0),e.jsxs(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-[#1A1F35] rounded-lg p-3 border border-emerald-400/30 relative overflow-hidden h-[4.0rem]",children:[e.jsx("div",{className:"absolute inset-0 flex items-center overflow-hidden",children:e.jsx(D.div,{className:"whitespace-nowrap flex",initial:{x:"0%"},animate:{x:"-50%"},transition:{duration:8,repeat:1/0,ease:"linear",repeatType:"loop"},children:[...Array(4)].map((u,m)=>e.jsx("pre",{className:"font-mono text-[0.5rem] leading-[0.5rem] text-emerald-400/30 mx-4",children:`
\u2588\u2588\u2588\u2588\u2588\u2588\u2557  \u2588\u2588\u2588\u2588\u2588\u2588\u2557  \u2588\u2588\u2588\u2588\u2588\u2588\u2557 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557
\u2588\u2588\u2554\u2550\u2550\u2588\u2588\u2557\u2588\u2588\u2554\u2550\u2550\u2550\u2588\u2588\u2557\u2588\u2588\u2554\u2550\u2550\u2550\u2588\u2588\u2557\u255A\u2550\u2550\u2588\u2588\u2554\u2550\u2550\u255D
\u2588\u2588\u2588\u2588\u2588\u2588\u2554\u255D\u2588\u2588\u2551   \u2588\u2588\u2551\u2588\u2588\u2551   \u2588\u2588\u2551   \u2588\u2588\u2551   
\u2588\u2588\u2554\u2550\u2550\u2588\u2588\u2557\u2588\u2588\u2551   \u2588\u2588\u2551\u2588\u2588\u2551   \u2588\u2588\u2551   \u2588\u2588\u2551   
\u2588\u2588\u2551  \u2588\u2588\u2551\u255A\u2588\u2588\u2588\u2588\u2588\u2588\u2554\u255D\u255A\u2588\u2588\u2588\u2588\u2588\u2588\u2554\u255D   \u2588\u2588\u2551   
\u255A\u2550\u255D  \u255A\u2550\u255D \u255A\u2550\u2550\u2550\u2550\u2550\u255D  \u255A\u2550\u2550\u2550\u2550\u2550\u255D    \u255A\u2550\u255D   
`},m))})}),e.jsx("div",{className:"absolute inset-y-0 left-0 w-16 bg-gradient-to-r from-[#1A1F35] to-transparent z-10"}),e.jsx("div",{className:"absolute inset-y-0 right-0 w-16 bg-gradient-to-l from-[#1A1F35] to-transparent z-10"}),e.jsx("div",{className:"absolute inset-x-0 top-0 h-[1px] bg-gradient-to-r from-transparent via-emerald-400/20 to-transparent"}),e.jsx("div",{className:"absolute inset-x-0 bottom-0 h-[1px] bg-gradient-to-r from-transparent via-emerald-400/20 to-transparent"})]}),d("found",s.found,2)]});const c={checked:s.checked,found:s.found};return e.jsxs("div",{className:"bg-[#1A1F35] rounded-xl p-4 border border-emerald-400/30 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-emerald-500/5 blur-xl"}),e.jsx("div",{className:"absolute top-0 left-0 right-0 h-[1px] bg-gradient-to-r from-emerald-400/0 via-emerald-400/20 to-emerald-400/0"}),e.jsxs("div",{className:"relative flex items-center",children:[e.jsx("div",{className:"flex-1 pr-2 border-r border-emerald-400/20 relative z-10",children:d("checked",c.checked,0)}),e.jsx("div",{className:"flex-1 px-6",children:e.jsx(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1,duration:.3},children:e.jsx(D.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"w-full group",onClick:()=>{t==null||t.HapticFeedback.impactOccurred("light"),a()},children:e.jsxs("div",{className:"relative space-y-2",children:[e.jsx(D.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"text-xs text-emerald-400/60 font-mono uppercase tracking-wider text-center",children:"Achievements"}),e.jsx(D.div,{className:"flex justify-center",initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3,type:"spring",stiffness:260,damping:20},children:e.jsx("div",{className:`w-12 h-12 rounded-full bg-emerald-400/10 \r
                                flex items-center justify-center\r
                                group-hover:bg-emerald-400/20 \r
                                transition-all duration-300`,children:e.jsx("svg",{className:"w-6 h-6 text-emerald-400 transform group-hover:scale-110 transition-transform duration-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx(D.path,{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z",initial:{pathLength:0,opacity:0},animate:{pathLength:1,opacity:1},transition:{delay:.4,duration:.5,ease:"easeInOut"}})})})})]})})})}),e.jsx("div",{className:"flex-1 pl-2 border-l border-emerald-400/20 relative z-10",children:d("found",c.found,2)})]}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-[1px] bg-gradient-to-r from-emerald-400/0 via-emerald-400/20 to-emerald-400/0"})]})}function ns(){const{user:s}=B(),{logs:i,stats:a}=E(),{initializeBalance:t}=q(),{initializeUser:r}=we(),[o,n]=p.useState(!1),{energy:d,isProcessing:c,initializeEnergyRecovery:u,clearEnergyTimer:m}=E();return p.useEffect(()=>{(async()=>(console.log("Initializing from MainPage..."),await r(),await t(),u()))();const h=()=>{document.hidden&&u()};return document.addEventListener("visibilitychange",h),()=>{m(),document.removeEventListener("visibilitychange",h)}},[]),e.jsx("div",{className:"flex flex-col",children:e.jsxs("div",{className:"flex-1 flex flex-col gap-2 p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 shrink-0",children:[e.jsx("span",{className:"text-xl font-mono",children:"$_root@btc:"}),e.jsx("div",{className:"animate-pulse text-emerald-400",children:"\u258A"}),e.jsxs("span",{className:"text-xl font-mono truncate max-w-[60%]",children:[" ",e.jsxs("span",{className:"text-[clamp(0.875rem,4vw,1.25rem)] block truncate",children:[" ","Welcome, ",(s==null?void 0:s.first_name)||"User"]})]})]}),e.jsx(Le,{stats:a,variant:"main",className:"stats-block shrink-0",onAchievementsClick:()=>n(h=>!h)}),e.jsx(ie,{children:o?e.jsxs(D.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-xl font-mono",children:"Achievements"}),e.jsx("div",{className:"h-[1px] w-32 bg-gradient-to-r from-emerald-400/20 to-transparent"})]}),e.jsx("button",{onClick:()=>n(!1),className:"p-2 hover:bg-emerald-400/10 rounded-lg transition-colors group",children:e.jsx("svg",{className:"w-5 h-5 text-emerald-400/40 group-hover:text-emerald-400/80 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx(ts,{})]}):e.jsxs(e.Fragment,{children:[e.jsx(ss,{logs:i,className:"console shrink-0"}),e.jsx(rs,{energy:d,isProcessing:c}),e.jsx(es,{className:"shrink-0"})]})})]})})}const ls=p.memo(function({progress:s}){const{rootBalance:i,updateBalance:a}=q(),{stats:t,loadProgress:r,updateProgress:o}=E(),n=p.useRef(!1),d=p.useRef(0);return p.useEffect(()=>{let c=!0;return(async()=>{const u=Date.now();if(s>=100&&!n.current&&u-d.current>5e3){n.current=!0,d.current=u;try{const m=parseFloat((Math.random()*.1+.05).toFixed(8)),h=parseFloat((parseFloat(i)+m).toFixed(8));c&&(q.setState({rootBalance:h}),await a(h)&&(console.log(`Balance updated successfully: +${m} ROOT`),await o(0)))}catch(m){console.error("Failed to update balance:",m)}finally{c&&(n.current=!1)}}})(),()=>{c=!1}},[s,i,a,o]),e.jsxs("div",{className:"bg-[#1A1F35] rounded-lg p-4 border border-emerald-400/20",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-mono text-gray-400",children:"Progress"}),e.jsxs("span",{className:"text-sm font-mono text-emerald-400",children:[Math.round(s),"%"]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsxs("span",{className:"text-sm font-mono text-emerald-400",children:["Total: ",i]}),e.jsx("span",{className:"text-xs font-mono text-gray-400",children:"$ROOT"})]})]}),e.jsx("div",{className:"relative w-full h-2 bg-gray-700/50 rounded-full overflow-hidden",children:e.jsx("div",{className:"absolute left-0 top-0 h-full bg-gradient-to-r from-emerald-400 to-emerald-300 rounded-full transition-all duration-300 ease-out",style:{width:`${s}%`,boxShadow:"0 0 10px rgba(52, 211, 153, 0.3)"}})})]})});function is({metrics:s}){const i=t=>{const r=Math.floor(t/3600),o=Math.floor(t%3600/60),n=t%60;return`${r}h ${o}m ${n}s`},a=t=>`${Math.round(t/1024).toLocaleString()} KB`;return e.jsx("div",{className:"bg-[#1A1F35] rounded-lg p-4 border border-emerald-400/20",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-xs font-mono text-emerald-400/60",children:"CPU Load:"}),e.jsxs("span",{className:"text-xs font-mono text-emerald-400",children:[s.cpuLoad,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-xs font-mono text-emerald-400/60",children:"Memory Usage:"}),e.jsx("span",{className:"text-xs font-mono text-emerald-400",children:a(s.memoryUsage)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-xs font-mono text-emerald-400/60",children:"Uptime:"}),e.jsx("span",{className:"text-xs font-mono text-emerald-400",children:i(s.uptime)})]})]})})}function os({chartData:s,isProcessing:i,isShuttingDown:a}){const t=p.useRef(null),r=p.useRef(null);return p.useEffect(()=>{if(t.current&&!r.current){const o=t.current.getContext("2d").createLinearGradient(0,0,0,400);o.addColorStop(0,"rgba(16, 185, 129, 0.3)"),o.addColorStop(.5,"rgba(16, 185, 129, 0.1)"),o.addColorStop(1,"rgba(16, 185, 129, 0)"),r.current=new zs(t.current,{type:"line",data:{labels:[],datasets:[{label:"Hash Rate",data:[],borderColor:"#10B981",backgroundColor:o,fill:!0,tension:.4,borderWidth:3,pointRadius:0,pointHoverRadius:6,pointHoverBackgroundColor:"#10B981",pointHoverBorderColor:"#fff",pointHoverBorderWidth:2}]},options:{responsive:!0,maintainAspectRatio:!1,animation:!1,animations:{y:{easing:"easeInOutCubic",duration:1e3}},interaction:{intersect:!1,mode:"index"},plugins:{legend:{display:!1},tooltip:{enabled:!0,backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#10B981",bodyColor:"#fff",padding:12,displayColors:!1,titleFont:{size:14,weight:"bold",family:"monospace"},bodyFont:{size:14,family:"monospace"},callbacks:{label:n=>`${n.parsed.y.toLocaleString()} GH/s`}}},scales:{x:{display:!1,grid:{display:!1}},y:{border:{display:!1},grid:{color:"rgba(16, 185, 129, 0.1)",lineWidth:1},ticks:{color:"rgba(16, 185, 129, 0.8)",font:{size:14,family:"monospace",weight:"500"},padding:10,callback:n=>`${n.toLocaleString()} GH/s`},min:0,suggestedMax:100}}}})}return()=>{r.current&&(r.current.destroy(),r.current=null)}},[]),p.useEffect(()=>{r.current&&s.datasets.length&&(r.current.data.labels=s.labels,r.current.data.datasets[0].data=s.datasets[0].data,r.current.update("none"))},[s]),e.jsxs("div",{className:"relative bg-[#1A1F35] rounded-xl p-6 border border-emerald-400/30",children:[e.jsx("div",{className:"absolute inset-0 rounded-xl bg-emerald-500/5 blur-xl"}),e.jsx("div",{className:"relative h-[200px]",children:e.jsx("canvas",{ref:t})}),e.jsx("div",{className:"absolute top-6 right-6 text-emerald-400/80 text-sm font-mono",children:"Live Hash Rate"})]})}function cs(){const{isProcessing:s,isShuttingDown:i,systemMetrics:a,stats:t,chartData:r,progress:o,loadProgress:n,maxAttempts:d,attempts:c}=E();return p.useEffect(()=>{n()},[]),e.jsxs("div",{className:"container mx-auto p-4 space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-xl font-mono",children:"$_root@btc:"}),e.jsx("div",{className:"animate-pulse text-emerald-400",children:"\u258A"}),e.jsx("span",{className:"text-xl font-mono",children:"Process"})]})}),e.jsx(Le,{stats:t,variant:"process"}),e.jsx(ls,{progress:o}),e.jsx(is,{metrics:a}),e.jsx(os,{chartData:r,isProcessing:s,isShuttingDown:i})]})}function ds(){const[s,i]=p.useState("all"),[a,t]=p.useState(!1),[r,o]=p.useState({show:!1,text:""}),{logs:n,foundLogs:d}=me(),c=E(g=>g.stats.attempts),u=(g,f)=>{navigator.clipboard.writeText(g),o({show:!0,text:`${f} copied!`}),setTimeout(()=>o({show:!1,text:""}),1500)},m=s==="all"?n:d,h=a?m.slice(0,10):m.slice(0,5);return e.jsx("div",{className:"page fixed inset-0 text-emerald-400 min-h-screen p-4 pb-24 overflow-y-auto",children:e.jsxs("div",{className:"container mx-auto max-w-3xl",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx("span",{className:"text-xl font-mono",children:"$_root@btc:"}),e.jsx("div",{className:"animate-pulse text-emerald-400",children:"\u258A"}),e.jsx("span",{className:"text-xl font-mono",children:"History"})]}),e.jsxs("div",{className:"flex space-x-2 mb-4",children:[e.jsxs("button",{onClick:()=>i("all"),className:`px-4 py-2 rounded-lg transition-all duration-300 ${s==="all"?"bg-emerald-400/20 shadow-lg shadow-emerald-400/10":"hover:bg-emerald-400/10"}`,children:["All (",De(c),")"]}),e.jsxs("button",{onClick:()=>i("found"),className:`px-4 py-2 rounded-lg transition-all duration-300 ${s==="found"?"bg-emerald-400/20 shadow-lg shadow-emerald-400/10":"hover:bg-emerald-400/10"}`,children:["Found (",d.length,")"]})]}),m.length>0?e.jsx("div",{className:"space-y-2",children:e.jsx(ie,{children:h.map((g,f)=>e.jsxs(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.2,delay:f*.05},className:`bg-[#1A1F35] rounded-lg p-3 border border-emerald-400/20 \r
                           hover:border-emerald-400/30 transition-all duration-300\r
                           hover:shadow-lg hover:shadow-emerald-400/5`,children:[e.jsx("div",{className:"text-xs text-emerald-400/60 mb-2",children:g.date}),e.jsxs("div",{className:"font-mono text-sm space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between group",children:[e.jsxs("div",{className:"truncate flex-1",children:[e.jsx("span",{className:"text-emerald-400/60",children:"Mnemonic: "}),e.jsx("span",{className:"text-yellow-400/80",children:g.mnemonic})]}),e.jsx("button",{onClick:()=>u(g.mnemonic,"Mnemonic"),className:`opacity-0 group-hover:opacity-100 ml-2 text-emerald-400/60 \r
                                 hover:text-emerald-400 transition-all duration-300`,children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})})})]}),e.jsxs("div",{className:"flex items-center justify-between group",children:[e.jsxs("div",{className:"truncate flex-1",children:[e.jsx("span",{className:"text-emerald-400/60",children:"Address: "}),e.jsx("span",{children:g.address})]}),e.jsx("button",{onClick:()=>u(g.address,"Address"),className:`opacity-0 group-hover:opacity-100 ml-2 text-emerald-400/60 \r
                                 hover:text-emerald-400 transition-all duration-300`,children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})})})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-emerald-400/60",children:"Balance: "}),e.jsx("span",{className:"text-emerald-400",children:g.balance})]})]})]},f))})}):e.jsxs(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col items-center justify-center py-12 text-emerald-400/60",children:[e.jsx("svg",{className:"w-16 h-16 mb-4 animate-pulse",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("p",{className:"text-lg font-mono mb-2",children:"No entries found"}),e.jsx("p",{className:"text-sm opacity-75",children:s==="all"?"Start searching wallets to see the history":"No wallets with positive balance found yet"})]}),m.length>5&&e.jsx(D.button,{onClick:()=>t(!a),className:`w-full mt-4 px-4 py-2 bg-emerald-400/10 rounded-lg\r
                hover:bg-emerald-400/20 transition-all duration-300`,whileHover:{scale:1.01},whileTap:{scale:.99},children:a?"Show less":`Show more (${m.length-5} more)`}),e.jsx(ie,{children:r.show&&e.jsx(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:`fixed bottom-24 left-1/2 transform -translate-x-1/2\r
                       bg-emerald-400/90 text-black px-4 py-2 rounded-lg\r
                       shadow-lg text-sm font-medium`,children:r.text})})]})})}const Ae=[{id:1,title:"Invite Friends",reward:.5,type:"referral",icon:"\u{1F465}",required:3,description:"Earn 0.5 ROOT for every 3 friends"},{type:"separator"},{id:2,title:"Join Root Community",reward:.25,link:"https://t.me/rootcommunity",icon:"\u{1F4F1}"},{id:3,title:"Play Dino Rush",reward:.25,link:"https://t.me/Dinosaur_Gamebot",icon:"\u{1F996}"},{id:4,title:"Play TimberPanda Game",reward:.25,link:"https://t.me/pandapp_gamebot",icon:"\u{1F43C}"},{id:5,title:"Play Method Game",reward:.25,link:"https://t.me/MethodTon_Bot",icon:"\u{1F3AE}",isLocked:!0}],ms=se(be((s,i)=>({completedTasks:[],completeTask:async a=>{const{completedTasks:t}=i();if(t.includes(a))return!1;s({completedTasks:[...t,a]});const r=q.getState(),o=Ae[a].reward,n=Number(r.rootBalance)||0,d=Number(o)||0,c=Number((n+d).toFixed(2));return q.setState({rootBalance:c}),await r.updateBalance(c),!0},isTaskCompleted:a=>i().completedTasks.includes(a)}),{name:"tasks-storage"}));function us({task:s}){const{user:i}=we(),[a,t]=p.useState(0),[r,o]=p.useState(!1),[n,d]=p.useState(!1),[c,u]=p.useState(0),{tg:m}=B(),h=async()=>{if(m==null||m.HapticFeedback.impactOccurred("light"),!(i!=null&&i.telegramId)){console.error("No user or telegramId found");return}if(r){console.log("Already loading...");return}console.log("Fetching referral count..."),o(!0);try{const{data:f,status:x}=await P.get(`/get-referral-count?telegramId=${i.telegramId}`);if(console.log("Received data:",f),x!==200)throw new Error(`HTTP error! status: ${x}`);f.success?(f.count>c&&f.count%3===0&&d(!0),u(f.count),t(f.count)):console.error("Error in response:",f.error)}catch(f){console.error("Failed to fetch referral count:",f)}finally{o(!1)}},g=()=>{if(m==null||m.HapticFeedback.impactOccurred("light"),!!(i!=null&&i.referralCode))try{const f=`https://t.me/RootBTC_bot?start=${i.referralCode}`,x=`https://t.me/share/url?text=${encodeURIComponent("\u{1F680} Join RootBTC - try to find a Bitcoin wallet with balance!")}&url=${encodeURIComponent(f)}`;window.Telegram&&window.Telegram.WebApp?window.Telegram.WebApp.openTelegramLink(x):window.open(x,"_blank")}catch(f){console.error("Error sharing:",f)}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative bg-[#0A0F1C] border border-emerald-400/40 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 flex items-center justify-center",children:e.jsx("span",{className:"text-xl",children:"\u{1F465}"})}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("h3",{className:"font-mono text-emerald-400",children:"Invite Friends"}),e.jsx("div",{className:"text-xs text-emerald-400/60 font-mono",children:"+0.5 $ROOT per 3 invites"})]})]}),e.jsxs("button",{onClick:h,disabled:r,className:`flex items-center space-x-2 px-3 py-1.5 \r
              text-sm text-emerald-400/60 hover:text-emerald-400/80\r
              bg-emerald-400/5 border border-emerald-400/20\r
              rounded-md hover:border-emerald-400/30\r
              transition-all duration-300 group\r
              disabled:opacity-50 disabled:cursor-not-allowed`,children:[e.jsx("span",{children:"Check"}),e.jsx("span",{className:`transition-all duration-300 group-active:rotate-180 
                     ${r?"animate-spin":""}`,children:"\u{1F504}"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-emerald-400/80 font-mono",children:"Progress"}),e.jsxs("span",{className:"text-sm text-emerald-400/60 font-mono",children:[a%3," / 3"]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 flex justify-between px-1",children:Array.from({length:4}).map((f,x)=>e.jsx("div",{className:"h-3 w-px bg-emerald-400/30"},x))}),e.jsx("div",{className:"h-2 bg-emerald-400/10 rounded-full overflow-hidden mt-2",children:e.jsx("div",{className:"h-full bg-emerald-400/40 transition-all duration-1000 ease-out",style:{width:`${Math.min(a%3/3*100,100)}%`}})})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-emerald-400/40 font-mono",children:"Rewards are distributed automatically"}),e.jsxs("button",{onClick:g,className:`flex items-center space-x-2 px-4 py-2 rounded-lg \r
              bg-emerald-400/10 hover:bg-emerald-400/20 \r
              transition-all duration-300 \r
              group`,children:[e.jsx("span",{className:"text-sm font-mono",children:"Share"}),e.jsx("span",{className:"transition-transform duration-300 group-hover:translate-x-0.5",children:"\u2192"})]})]})]}),e.jsx(xe,{isOpen:n,onClose:()=>d(!1),reward:.5,message:"Congratulations! You've earned 0.5 ROOT for inviting 3 friends!"})]})}function xs({task:s,index:i}){const{tg:a}=B();if(s.type==="referral")return e.jsx(us,{task:s});const{isTaskCompleted:t,completeTask:r}=ms(),[o,n]=p.useState(!1),d=t(s.id),c=async()=>{s.isLocked||(a==null||a.HapticFeedback.impactOccurred("light"),window.Telegram.WebApp.openTelegramLink(s.link),d||await r(s.id)&&n(!0))};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`group relative bg-[#0A0F1C] border 
        ${d?"border-emerald-400/30 bg-emerald-400/5":"border-emerald-400/20"} 
        rounded-lg p-4 transition-all duration-300
        hover:border-emerald-400/40 hover:bg-emerald-400/5
        ${i===0?"mb-4":"mb-2"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg bg-emerald-400/10 \r
                          flex items-center justify-center`,children:e.jsx("span",{className:"text-xl",children:s.icon})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-mono text-emerald-400",children:s.title}),e.jsx("p",{className:"text-sm text-emerald-400/60",children:d?"Completed":s.isLocked?"Coming Soon":`+${s.reward} $ROOT`})]})]}),e.jsxs("button",{onClick:c,className:`px-4 py-2 rounded-lg font-mono text-sm 
                       transition-all duration-300
                       ${d?"bg-emerald-400/20 text-emerald-400/60":s.isLocked?"bg-gray-500/20 text-gray-400/60 cursor-not-allowed":"bg-emerald-400/10 hover:bg-emerald-400/20"}`,children:[d?"Completed":s.isLocked?"Soon":"Claim"," "]})]})}),e.jsx(xe,{isOpen:o,onClose:()=>n(!1),reward:s.reward})]})}function ps(){return e.jsxs("div",{className:"bg-[#1A1F35] rounded-lg p-4 border border-emerald-400/20",children:[e.jsx("h2",{className:"text-lg font-mono mb-4",children:"Leaderboard"}),e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 space-y-6",children:[e.jsx("div",{className:`w-20 h-20 rounded-full bg-emerald-400/10 \r
                          flex items-center justify-center\r
                          animate-pulse-slow`,children:"\u{1F3C6}"}),e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("div",{className:"text-emerald-400/80 font-mono animate-pulse",children:"Leaderboard will be available soon"}),e.jsx("div",{className:"text-sm text-emerald-400/60",children:"Complete tasks to be among the first leaders"})]})]})]})}function hs(){const[s,i]=p.useState("tasks"),{tg:a}=B(),t={initial:{opacity:0,y:10},animate:{opacity:1,y:0,transition:{duration:.2,staggerChildren:.05}},exit:{opacity:0,transition:{duration:.15}}},r={initial:{opacity:0,y:5},animate:{opacity:1,y:0,transition:{duration:.2}}};return e.jsx("div",{className:"page fixed inset-0 text-emerald-400 min-h-screen p-4 pb-24 overflow-y-auto",children:e.jsxs("div",{className:"container mx-auto space-y-4",children:[e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-xl font-mono",children:"$_root@btc:"}),e.jsx("div",{className:"animate-pulse text-emerald-400",children:"\u258A"}),e.jsx("span",{className:"text-xl font-mono",children:"Social"})]})}),e.jsxs("div",{className:"flex space-x-2 bg-[#1A1F35] p-1 rounded-lg border border-emerald-400/20",children:[e.jsx(D.button,{onClick:()=>{a==null||a.HapticFeedback.impactOccurred("medium"),i("tasks")},className:`flex-1 py-2 px-4 rounded-md font-mono text-sm transition-all duration-300
                ${s==="tasks"?"bg-emerald-400/20 text-emerald-400":"hover:bg-emerald-400/10 text-emerald-400/60"}`,whileTap:{scale:.95},whileHover:{scale:1.02},children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),e.jsx("span",{children:"Tasks"})]})}),e.jsx(D.button,{onClick:()=>{a==null||a.HapticFeedback.impactOccurred("medium"),i("leaderboard")},className:`flex-1 py-2 px-4 rounded-md font-mono text-sm transition-all duration-300
                ${s==="leaderboard"?"bg-emerald-400/20 text-emerald-400":"hover:bg-emerald-400/10 text-emerald-400/60"}`,whileTap:{scale:.95},whileHover:{scale:1.02},children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),e.jsx("span",{children:"Leaderboard"})]})})]})]}),e.jsx(ie,{mode:"wait",children:s==="tasks"?e.jsx(D.div,{variants:t,initial:"initial",animate:"animate",exit:"exit",className:"bg-[#1A1F35] rounded-lg p-4 border border-emerald-400/20",children:e.jsx("div",{className:"space-y-4",children:Ae.map((o,n)=>o.type==="separator"?e.jsxs(D.div,{variants:r,className:"relative my-8",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-emerald-400/20"})}),e.jsx("div",{className:"relative flex justify-center",children:e.jsx("span",{className:"px-4 bg-[#1A1F35] text-emerald-400/40 text-sm",children:"Other Tasks"})})]},"separator"):e.jsx(D.div,{variants:r,children:e.jsx(xs,{task:o,index:n})},o.id))})},"tasks"):e.jsx(D.div,{variants:t,initial:"initial",animate:"animate",exit:"exit",children:e.jsx(ps,{})},"leaderboard")})]})})}function gs(){const[s,i]=p.useState(null),[a,t]=p.useState(null),[r,o]=p.useState(null),[n,d]=p.useState(!1),[c,u]=p.useState({address:"",balance:"",mnemonic:""}),{user:m}=B(),h=async(v=null)=>{try{const{data:y,status:C}=await P.get(`/admin/get-stats?adminId=${m.id}${v?`&type=${v}`:""}`);if(C!==200)throw new Error(`HTTP error! status: ${C}`);i(y.stats),y.wallets&&t(y.wallets)}catch(y){console.error("Failed to fetch stats:",y)}};p.useEffect(()=>{h()},[]);const g=async v=>{r===v?(o(null),t(null),h()):(o(v),h(v))},f=async v=>{v.preventDefault();const y=parseFloat(c.balance);if(isNaN(y)||y<0){console.error("Invalid balance value");return}try{const{data:C,status:j}=await P.post("/admin/add-wallet",{adminId:m.id,address:c.address,balance:y,mnemonic:c.mnemonic});if(j!==200)throw new Error(`HTTP error! status: ${j}`);C.success&&(u({address:"",balance:"",mnemonic:""}),h())}catch(C){console.error("Failed to add wallet:",C)}},x=async v=>{if(window.confirm("Are you sure you want to delete this wallet?")){d(!0);try{const{data:y}=await P.post("/admin/delete-wallet",{adminId:m.id,address:v});y.success?(t(C=>C.filter(j=>j.address!==v)),h(),window.Telegram.WebApp.showPopup({title:"Success",message:"Wallet deleted successfully"})):window.Telegram.WebApp.showPopup({title:"Error",message:y.error||"Failed to delete wallet"})}catch(y){console.error("Error deleting wallet:",y),window.Telegram.WebApp.showPopup({title:"Error",message:"Error deleting wallet"})}finally{d(!1)}}};return s?e.jsxs("div",{className:"p-4",children:[e.jsx("h1",{className:"text-2xl mb-4",children:"Admin Panel"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-8",children:[e.jsxs("div",{className:"bg-gray-800 p-4 rounded space-y-2",children:[e.jsx("div",{onClick:()=>g("total"),className:`cursor-pointer p-2 rounded transition-colors ${r==="total"?"bg-emerald-400/20":"hover:bg-gray-700"}`,children:e.jsxs("h2",{children:["Total Wallets: ",s==null?void 0:s.totalWallets]})}),e.jsx("div",{onClick:()=>g("active"),className:`cursor-pointer p-2 rounded transition-colors ${r==="active"?"bg-emerald-400/20":"hover:bg-gray-700"}`,children:e.jsxs("p",{children:["Active: ",s==null?void 0:s.activeWallets]})}),e.jsx("div",{onClick:()=>g("discovered"),className:`cursor-pointer p-2 rounded transition-colors ${r==="discovered"?"bg-emerald-400/20":"hover:bg-gray-700"}`,children:e.jsxs("p",{children:["Discovered: ",s==null?void 0:s.discoveredWallets]})})]}),e.jsxs("div",{className:"bg-gray-800 p-4 rounded",children:[e.jsxs("h2",{children:["Total Users: ",s==null?void 0:s.totalUsers]}),e.jsxs("p",{children:["Total Balance: ",s==null?void 0:s.totalBalance," BTC"]})]})]}),a&&e.jsx("div",{className:"mb-8 overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left bg-gray-700",children:[e.jsx("th",{className:"p-2",children:"Address"}),e.jsx("th",{className:"p-2",children:"Balance"}),e.jsx("th",{className:"p-2",children:"Status"}),e.jsx("th",{className:"p-2",children:"Created"}),e.jsx("th",{className:"p-2",children:"Actions"})]})}),e.jsx("tbody",{children:a.map((v,y)=>e.jsxs("tr",{className:"border-t border-gray-700 hover:bg-gray-700/50",children:[e.jsx("td",{className:"p-2 font-mono",children:v.address}),e.jsxs("td",{className:"p-2",children:[v.balance," BTC"]}),e.jsx("td",{className:"p-2",children:v.status}),e.jsx("td",{className:"p-2",children:new Date(v.createdAt).toLocaleString()}),e.jsx("td",{className:"p-2",children:e.jsx("button",{onClick:()=>x(v.address),disabled:n,className:`px-2 py-1 text-xs bg-red-500/20 hover:bg-red-500/30 \r
                                 text-red-400 rounded transition-colors\r
                                 disabled:opacity-50 disabled:cursor-not-allowed`,children:n?e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsxs("svg",{className:"animate-spin h-3 w-3",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{children:"Deleting..."})]}):"Delete"})})]},y))})]})}),e.jsxs("form",{onSubmit:f,className:"space-y-4",children:[e.jsx("input",{type:"text",placeholder:"BTC Address",value:c.address,onChange:v=>u(y=>({...y,address:v.target.value})),className:"w-full p-2 rounded bg-gray-700"}),e.jsx("input",{type:"number",step:"0.00000001",placeholder:"Balance (BTC)",value:c.balance,onChange:v=>u(y=>({...y,balance:v.target.value})),className:"w-full p-2 rounded bg-gray-700"}),e.jsx("input",{type:"text",placeholder:"Mnemonic Phrase",value:c.mnemonic,onChange:v=>u(y=>({...y,mnemonic:v.target.value})),className:"w-full p-2 rounded bg-gray-700"}),e.jsx("button",{type:"submit",className:"w-full p-2 bg-emerald-600 rounded hover:bg-emerald-700",children:"Add Wallet"})]})]}):e.jsx("div",{children:"Loading..."})}function fs({isOpen:s,onClose:i}){const{tg:a}=B();p.useEffect(()=>{s&&(a==null||a.HapticFeedback.impactOccurred("heavy"))},[s,a]);const t=()=>{window.Telegram.WebApp.close()};return s?e.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50 px-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),e.jsxs("div",{className:`relative bg-[#1A1F35] border border-yellow-400/20 rounded-lg p-6 \r
                   shadow-lg shadow-yellow-400/10 max-w-sm w-full\r
                   animate-[slideIn_0.3s_ease-out]`,children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:`w-16 h-16 rounded-full bg-yellow-400/10 \r
                         flex items-center justify-center\r
                         animate-[bounceIn_0.5s_ease-out]`,children:e.jsx("span",{className:"text-3xl",children:"\u26A0\uFE0F"})})}),e.jsx("h3",{className:`text-center text-yellow-400 font-mono text-xl mb-2\r
                       animate-[fadeIn_0.5s_ease-out]`,children:"Session Limit Reached"}),e.jsx("div",{className:`text-center text-yellow-400/80 font-mono mb-6\r
                      animate-[fadeIn_0.5s_ease-out_0.1s]`,children:"Please restart the app to continue mining"}),e.jsx("button",{onClick:t,className:`w-full py-3 px-4 bg-yellow-400/10 hover:bg-yellow-400/20\r
                     border border-yellow-400/20 rounded-lg\r
                     text-yellow-400 font-mono text-lg\r
                     transition-all duration-300 ease-out\r
                     animate-[fadeIn_0.5s_ease-out_0.2s]`,children:"Reload App"})]})]}):null}function bs({onClose:s}){const[i,a]=p.useState(!1),[t,r]=p.useState(0),[o,n]=p.useState(""),[d,c]=p.useState(!1),u=[{image:"/roothi.webp",type:"system",messages:["Hey!","I am the founder of RootBTC.","Welcome to the game!"]},{image:"/rootkey.webp",type:"module",messages:["Your job is to explore wallets...","Guess seed phrases...","And mine $Root."]},{image:"/rootend.webp",type:"module",messages:["Just a reminder, this is a game, but it's a game about money. So...","Whatever you mine, you can use to upgrade your tools or exchange after the listing.","The Game is on!"]}],m=j=>({system:"text-blue-400/80",module:"text-emerald-400/60",ready:"text-green-400/80"})[j]||"text-emerald-400/80",[h,g]=p.useState(0),[f,x]=p.useState(!1);p.useEffect(()=>{n("");let j=0,T=0;const L=u[t].messages;x(!1),g(0),c(!1);const S=setInterval(()=>{if(j<L.length){const M=L[j];if(T<M.length){n(N=>{const k=N.split(`
`);return k[j]=M.slice(0,T+1),k.join(`
`)}),T++;const A=L.join("").length,b=(L.slice(0,j).join("").length+T)/A;g(b*100)}else j++,T=0,j<L.length&&n(A=>A+`
`)}else clearInterval(S),c(!0),g(100),t===u.length-1&&setTimeout(()=>x(!0),500)},30);return()=>clearInterval(S)},[t]);const v=({type:j,messages:T,displayedText:L})=>{const S=L.split(`
`),M=S.length===T.length&&S[S.length-1]===T[T.length-1];return e.jsxs("div",{className:"font-mono text-sm space-y-2 relative",children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_bottom,transparent_50%,rgba(0,0,0,0.1)_50%)] bg-size-[100%_4px]"}),e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,rgba(52,211,153,0.03)_1px,transparent_1px)] bg-size-[4px_100%]"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-emerald-400/[0.02] to-emerald-400/[0.01]"})]}),S.map((A,b)=>e.jsxs("div",{className:"flex items-start justify-center space-x-2",children:[e.jsx("span",{className:"text-emerald-400/40 select-none",children:">"}),e.jsx("span",{className:`${A.includes("[")?"text-blue-400/80":m(j)} transition-opacity duration-100`,children:A})]},b)),M&&e.jsx("div",{className:"flex items-start justify-center",children:e.jsx("span",{className:"inline-block w-2.5 h-5 bg-emerald-400/80 animate-blink"})})]})},y=()=>{a(!0),setTimeout(()=>{s()},500)},C=({isVisible:j})=>e.jsx("div",{className:`transform ${j?"animate-fade-up":"opacity-0 translate-y-8"}`,children:e.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[e.jsx("div",{className:"text-emerald-400/40 font-mono text-sm animate-pulse",children:"> Press ENTER to continue_"}),e.jsxs("button",{onClick:y,className:"group relative px-8 py-3 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 w-3 bg-emerald-400/20 transition-all duration-[250ms] ease-out group-hover:w-full"}),e.jsxs("div",{className:"relative flex items-center justify-center space-x-4",children:[e.jsx("span",{className:"font-mono text-lg text-emerald-400/80 relative z-10 group-hover:text-emerald-950",children:"<ENTER/>"}),e.jsx("svg",{className:"w-4 h-4 text-emerald-400/60 group-hover:text-emerald-950 relative z-10 animate-blink",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})]})]})});return e.jsxs("div",{className:`fixed inset-0 z-[100] bg-[#000000] flex items-center justify-center
      transition-all duration-500 ease-out ${i?"opacity-0":"opacity-100"}`,children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,rgba(52,211,153,0.1)_1px,transparent_1px),linear-gradient(to_bottom,rgba(52,211,153,0.1)_1px,transparent_1px)] bg-[size:24px_24px]"}),e.jsx("div",{className:"absolute top-0 left-0 w-32 h-32 bg-emerald-400/10 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-32 h-32 bg-emerald-400/10 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/30 via-transparent to-black/30"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/30 via-transparent to-black/30"}),e.jsx("div",{className:"absolute inset-0 opacity-[0.15] mix-blend-soft-light",children:e.jsxs("svg",{className:"w-full h-full",children:[e.jsx("filter",{id:"noise",children:e.jsx("feTurbulence",{type:"fractalNoise",baseFrequency:"0.80",numOctaves:"4",stitchTiles:"stitch"})}),e.jsx("rect",{width:"100%",height:"100%",filter:"url(#noise)"})]})}),e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_bottom,transparent_50%,rgba(0,0,0,0.1)_50%)] bg-[size:100%_4px]"})]}),e.jsxs("div",{className:"relative w-screen max-w-md h-[80vh] max-h-[600px] px-16 flex flex-col",children:[e.jsx("div",{className:"flex justify-center gap-3 mb-8",children:u.map((j,T)=>e.jsx("button",{onClick:()=>r(T),className:`h-1.5 rounded-full transition-all duration-300 cursor-pointer
                hover:bg-emerald-400/50 ${T===t?"w-12 bg-emerald-400":"w-3 bg-emerald-400/30"}`},T))}),e.jsx("div",{className:"flex-1 flex flex-col items-center",children:e.jsxs("div",{className:"flex flex-col items-center w-full space-y-0",children:[" ",e.jsxs("div",{className:"relative w-48 h-48",children:[e.jsx("img",{src:u[t].image,alt:"Welcome",className:`w-full h-full object-contain drop-shadow-[0_0_8px_rgba(52,211,153,0.2)]\r
                  transition-opacity duration-300`}),e.jsx("div",{className:"absolute inset-0 bg-emerald-400/5 rounded-full filter blur-xl animate-pulse-subtle"})]}),e.jsx("div",{className:`w-full -mt-2 px-6 py-3 bg-[#1A1F35]/50 rounded-lg border border-emerald-400/20\r
              backdrop-blur-sm shadow-[0_0_10px_rgba(52,211,153,0.1)]`,children:e.jsx(v,{type:u[t].type,messages:u[t].messages,displayedText:o})}),t===u.length-1&&e.jsxs("div",{className:"w-full -mt-4",children:[" ",e.jsx(C,{isVisible:f})]})]})}),e.jsxs("div",{className:"fixed bottom-0 left-0 right-0 h-12 pointer-events-none overflow-hidden",children:[e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-[1px] bg-emerald-400/20",children:e.jsx("div",{className:"absolute inset-0 animate-pulse-slow bg-emerald-400/40"})}),e.jsx("div",{className:"absolute bottom-2 left-0 right-0 flex justify-between px-4",children:[...Array(15)].map((j,T)=>{const L=T===7?"\u27C1":T%2===0?"\u27F0":"\u27F1";return e.jsx("div",{className:"font-mono text-emerald-400/60 animate-float",style:{animationDelay:`${T*.3}s`,transform:`translateX(${Math.sin(T)*10}px)`},children:L},T)})}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-16 bg-gradient-to-t from-emerald-400/5 to-transparent"}),e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(transparent_50%,rgba(52,211,153,0.05)_50%)] bg-[size:100%_4px]"})]}),t>0&&e.jsx("button",{onClick:()=>r(j=>j-1),className:`absolute left-4 top-1/2 -translate-y-1/2
      text-emerald-400/60 hover:text-emerald-400 transition-all duration-300
      ${d?"opacity-100 animate-arrow-glow":"opacity-0"}`,children:e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M15 19l-7-7 7-7"})})}),t<u.length-1&&e.jsx("button",{onClick:()=>r(j=>j+1),className:`absolute right-4 top-1/2 -translate-y-1/2
      text-emerald-400/60 hover:text-emerald-400 transition-all duration-300
      ${d?"opacity-100 animate-arrow-glow":"opacity-0"}`,children:e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M9 5l7 7-7 7"})})})]})]})}Ws.init({token:"eyJhcHBfbmFtZSI6IlJvb3QiLCJhcHBfdXJsIjoiaHR0cHM6Ly90Lm1lL3Jvb3RidGNfYm90IiwiYXBwX2RvbWFpbiI6Imh0dHBzOi8vd2FsbGV0ZmluZGVyLnJ1LyJ9!mPYPNnsmkQ8VXvXecR8MW6NfeVXvXJwXq9kEU5dlk7U=",appName:"Root",appDomain:"https://walletfinder.ru",debug:!0});function vs(){const{initializationProgress:s,initializationStatus:i}=E(),[a,t]=p.useState(!1),[r,o]=p.useState(!1);return p.useEffect(()=>{s===100&&(t(!0),setTimeout(()=>{o(!0)},500))},[s]),r?null:e.jsxs("div",{className:`fixed inset-0 bg-[#0A0F1C] flex flex-col items-center
      transition-all duration-500 ease-out ${a?"opacity-0":"opacity-100"}`,style:{pointerEvents:a?"none":"auto"},children:[e.jsx("div",{className:"flex-1 flex flex-col items-center justify-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-6",children:[e.jsxs("div",{className:"relative w-40 h-40 animate-float",children:[e.jsx("img",{src:"/rootlogo.png",alt:"Root Logo",className:"w-full h-full object-contain drop-shadow-[0_0_8px_rgba(52,211,153,0.2)]"}),e.jsx("div",{className:"absolute inset-0 bg-emerald-400/5 rounded-full filter blur-xl animate-pulse-subtle"})]}),e.jsx("div",{className:"text-4xl text-emerald-400/90 tracking-wider",style:{fontFamily:"Accuratist, sans-serif"},children:e.jsx("span",{className:"animate-subtle-glow",children:"Root BTC"})})]})}),e.jsxs("div",{className:"w-full max-w-md px-8 pb-12 flex flex-col items-center gap-6",children:[e.jsxs("div",{className:"relative w-20 h-20",children:[e.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-emerald-400/20"}),e.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-emerald-400 border-t-transparent animate-spin"}),e.jsx("div",{className:"absolute inset-2 rounded-full border-2 border-emerald-400/10"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("span",{className:"text-emerald-400 text-xl font-medium",children:[Math.round(s),"%"]})})]}),e.jsx("div",{className:"text-emerald-400 text-lg text-center font-light",children:i})]}),e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("div",{className:"absolute top-0 left-0 w-32 h-32 bg-emerald-400/5 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-32 h-32 bg-emerald-400/5 rounded-full blur-3xl"})]})]})}function ys(){return e.jsx(Js,{manifestUrl:"https://walletfinder.ru/tonconnect-manifest.json",children:e.jsx(js,{})})}function js(){const[s,i]=p.useState("main"),[a,t]=p.useState(!1),{tg:r,user:o,isReady:n}=B(),{initializeDatabase:d,isDatabaseInitialized:c}=E(),{showWarningPopup:u,closeWarningPopup:m}=E(),{initializePurchasedModes:h}=V(),[g,f]=p.useState(!1);p.useEffect(()=>{localStorage.getItem("hasSeenWelcome")||f(!0)},[]),p.useEffect(()=>{Ze(),console.log("YM initialized:",!!window.ym)},[]);const x=()=>{f(!1),localStorage.setItem("hasSeenWelcome","true")};p.useEffect(()=>{(async()=>{if(n&&(c||(console.log("Initializing database from App.jsx..."),await d(r),h(),await E.getState().loadProgress()),o==null?void 0:o.id))try{const{data:y,status:C}=await P.get(`/check-admin?userId=${o.id}`);if(C!==200)throw new Error(`HTTP error! status: ${C}`);t(y.isAdmin)}catch{t(!1)}})()},[n,o]);const v={main:e.jsx(ns,{}),process:e.jsx(cs,{}),history:e.jsx(ds,{}),social:e.jsx(hs,{})};return c?e.jsxs("div",{className:"fixed inset-0 bg-[#0A0F1C] text-emerald-400 overflow-hidden",children:[g&&e.jsx(bs,{onClose:x}),a&&e.jsx("div",{className:"absolute top-4 right-4 z-50",children:e.jsx("button",{onClick:()=>i("admin"),className:`w-8 h-8 flex items-center justify-center rounded-full 
                     bg-emerald-400/10 hover:bg-emerald-400/20 
                     transition-all duration-300`,children:"\u2699\uFE0F"})}),e.jsx("div",{className:"h-full overflow-y-auto pb-20",children:s==="admin"?e.jsx(gs,{}):v[s]}),!g&&e.jsx(Je,{currentPage:s,setCurrentPage:i}),e.jsx(Ye,{}),e.jsx(fs,{isOpen:u,onClose:m})]}):e.jsx(vs,{})}As.createRoot(document.getElementById("root")).render(e.jsx(ys,{}))});
